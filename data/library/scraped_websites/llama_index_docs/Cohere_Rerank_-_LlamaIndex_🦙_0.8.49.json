{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/CohereRerank.html",
        "title": "Cohere Rerank - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## Cohere Rerank[\uf0c1](#cohere-rerank \"Permalink to this heading\")\n\nfrom llama\\_index import (\n    VectorStoreIndex,\n    SimpleDirectoryReader,\n    pprint\\_response,\n)\n\n/Users/suo/miniconda3/envs/llama/lib/python3.9/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user\\_install.html\n  from .autonotebook import tqdm as notebook\\_tqdm\n\n\\# load documents\ndocuments \\= SimpleDirectoryReader(\"../data/paul\\_graham\").load\\_data()\n\n\\# build index\nindex \\= VectorStoreIndex.from\\_documents(documents\\=documents)\n\n## Retrieve top 10 most relevant nodes, then filter with Cohere Rerank[\uf0c1](#retrieve-top-10-most-relevant-nodes-then-filter-with-cohere-rerank \"Permalink to this heading\")\n\nimport os\nfrom llama\\_index.indices.postprocessor.cohere\\_rerank import CohereRerank\n\napi\\_key \\= os.environ\\[\"COHERE\\_API\\_KEY\"\\]\ncohere\\_rerank \\= CohereRerank(api\\_key\\=api\\_key, top\\_n\\=2)\n\nquery\\_engine \\= index.as\\_query\\_engine(\n    similarity\\_top\\_k\\=10,\n    node\\_postprocessors\\=\\[cohere\\_rerank\\],\n)\nresponse \\= query\\_engine.query(\n    \"What did Sam Altman do in this essay?\",\n)\n\npprint\\_response(response)\n\nFinal Response: Sam Altman agreed to become the president of Y\nCombinator in October 2013. He took over starting with the winter 2014\nbatch, and worked with the founders to help them get through Demo Day\nin March 2014. He then reorganised Y Combinator to be controlled by\nsomeone other than the founders, so that it could last for a long\ntime.\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\nSource Node 1/2\nDocument ID: c1baaa76-acba-453b-a8d1-fdffbde1f424\nSimilarity: 0.845305\nText: day in 2010, when he was visiting California for interviews,\nRobert Morris did something astonishing: he offered me unsolicited\nadvice. I can only remember him doing that once before. One day at\nViaweb, when I was bent over double from a kidney stone, he suggested\nthat it would be a good idea for him to take me to the hospital. That\nwas what it ...\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\nSource Node 2/2\nDocument ID: abc0f1aa-464a-4ae1-9a7b-2d47a9dc967e\nSimilarity: 0.6486889\nText: due to our ignorance about investing. We needed to get\nexperience as investors. What better way, we thought, than to fund a\nwhole bunch of startups at once? We knew undergrads got temporary jobs\nat tech companies during the summer. Why not organize a summer program\nwhere they'd start startups instead? We wouldn't feel guilty for being\nin a sense...\n\n## Directly retrieve top 2 most similar nodes[\uf0c1](#directly-retrieve-top-2-most-similar-nodes \"Permalink to this heading\")\n\nquery\\_engine \\= index.as\\_query\\_engine(\n    similarity\\_top\\_k\\=2,\n)\nresponse \\= query\\_engine.query(\n    \"What did Sam Altman do in this essay?\",\n)\n\nRetrieved context is irrelevant and response is hallucinated.\n\npprint\\_response(response)\n\nFinal Response: Sam Altman was one of the founders of Y Combinator, a\nstartup accelerator. He was part of the first batch of startups funded\nby Y Combinator, which included Reddit, Justin Kan and Emmett Shear's\nTwitch, and Aaron Swartz. He was also involved in the Summer Founders\nProgram, which was a summer program where undergrads could start their\nown startups instead of taking a summer job at a tech company. He also\nhelped to develop a new version of Arc, a programming language, and\nwrote a book on Lisp.\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\nSource Node 1/2\nDocument ID: abc0f1aa-464a-4ae1-9a7b-2d47a9dc967e\nSimilarity: 0.7940524933077708\nText: due to our ignorance about investing. We needed to get\nexperience as investors. What better way, we thought, than to fund a\nwhole bunch of startups at once? We knew undergrads got temporary jobs\nat tech companies during the summer. Why not organize a summer program\nwhere they'd start startups instead? We wouldn't feel guilty for being\nin a sense...\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\nSource Node 2/2\nDocument ID: 5d696e20-b496-47f0-9262-7aa2667c1d96\nSimilarity: 0.7899270712205545\nText: at RISD, but otherwise I was basically teaching myself to paint,\nand I could do that for free. So in 1993 I dropped out. I hung around\nProvidence for a bit, and then my college friend Nancy Parmet did me a\nbig favor. A rent-controlled apartment in a building her mother owned\nin New York was becoming vacant. Did I want it? It wasn't much more\ntha..."
}