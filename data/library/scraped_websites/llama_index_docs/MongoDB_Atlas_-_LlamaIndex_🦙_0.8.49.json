{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/vector_stores/MongoDBAtlasVectorSearch.html",
        "title": "MongoDB Atlas - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## MongoDB Atlas[\uf0c1](#mongodb-atlas \"Permalink to this heading\")\n\n\\# Provide URI to constructor, or use environment variable\nimport pymongo\nfrom llama\\_index.vector\\_stores.mongodb import MongoDBAtlasVectorSearch\nfrom llama\\_index.indices.vector\\_store.base import VectorStoreIndex\nfrom llama\\_index.storage.storage\\_context import StorageContext\nfrom llama\\_index.readers.file.base import SimpleDirectoryReader\n\n\\# mongo\\_uri = os.environ\\[\"MONGO\\_URI\"\\]\nmongo\\_uri \\= (\n    \"mongodb+srv://<username>:<password>@<host>?retryWrites=true&w=majority\"\n)\nmongodb\\_client \\= pymongo.MongoClient(mongo\\_uri)\nstore \\= MongoDBAtlasVectorSearch(mongodb\\_client)\nstorage\\_context \\= StorageContext.from\\_defaults(vector\\_store\\=store)\nuber\\_docs \\= SimpleDirectoryReader(\n    input\\_files\\=\\[\"../data/10k/uber\\_2021.pdf\"\\]\n).load\\_data()\nindex \\= VectorStoreIndex.from\\_documents(\n    uber\\_docs, storage\\_context\\=storage\\_context\n)\n\nresponse \\= index.as\\_query\\_engine().query(\"What was Uber's revenue?\")\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**Uber's revenue for 2021 was $17,455 million.**\n\nfrom llama\\_index.response.schema import Response\n\n\\# Initial size\n\nprint(store.\\_collection.count\\_documents({}))\n\\# Get a ref\\_doc\\_id\ntyped\\_response \\= (\n    response if isinstance(response, Response) else response.get\\_response()\n)\nref\\_doc\\_id \\= typed\\_response.source\\_nodes\\[0\\].node.ref\\_doc\\_id\nprint(store.\\_collection.count\\_documents({\"metadata.ref\\_doc\\_id\": ref\\_doc\\_id}))\n\\# Test store delete\nif ref\\_doc\\_id:\n    store.delete(ref\\_doc\\_id)\n    print(store.\\_collection.count\\_documents({}))\n\nNote: For MongoDB Atlas, you have to additionally create an Atlas Search Index.\n\n[Mongo DB Docs | How to Index Vector Embeddings for Vector Search](https://www.mongodb.com/docs/atlas/atlas-search/field-types/knn-vector/)"
}