{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/evaluation/guideline_eval.html",
        "title": "Guideline Evaluator - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## Guideline Evaluator[\uf0c1](#guideline-evaluator \"Permalink to this heading\")\n\nThis notebook shows how to use `GuidelineEvaluator` to evaluate a question answer system given user specified guidelines.\n\nfrom llama\\_index.evaluation import GuidelineEvaluator\nfrom llama\\_index import ServiceContext\nfrom llama\\_index.llms import OpenAI\n\n\\# Needed for running async functions in Jupyter Notebook\nimport nest\\_asyncio\n\nnest\\_asyncio.apply()\n\nGUIDELINES \\= \\[\n    \"The response should fully answer the query.\",\n    \"The response should avoid being vague or ambiguous.\",\n    (\n        \"The response should be specific and use statistics or numbers when\"\n        \" possible.\"\n    ),\n\\]\n\nservice\\_context \\= ServiceContext.from\\_defaults(llm\\=OpenAI(model\\=\"gpt-4\"))\n\nevaluators \\= \\[\n    GuidelineEvaluator(service\\_context\\=service\\_context, guidelines\\=guideline)\n    for guideline in GUIDELINES\n\\]\n\nsample\\_data \\= {\n    \"query\": \"Tell me about global warming.\",\n    \"contexts\": \\[\n        (\n            \"Global warming refers to the long-term increase in Earth's\"\n            \" average surface temperature due to human activities such as the\"\n            \" burning of fossil fuels and deforestation.\"\n        ),\n        (\n            \"It is a major environmental issue with consequences such as\"\n            \" rising sea levels, extreme weather events, and disruptions to\"\n            \" ecosystems.\"\n        ),\n        (\n            \"Efforts to combat global warming include reducing carbon\"\n            \" emissions, transitioning to renewable energy sources, and\"\n            \" promoting sustainable practices.\"\n        ),\n    \\],\n    \"response\": (\n        \"Global warming is a critical environmental issue caused by human\"\n        \" activities that lead to a rise in Earth's temperature. It has\"\n        \" various adverse effects on the planet.\"\n    ),\n}\n\nfor guideline, evaluator in zip(GUIDELINES, evaluators):\n    eval\\_result \\= evaluator.evaluate(\n        query\\=sample\\_data\\[\"query\"\\],\n        contexts\\=sample\\_data\\[\"contexts\"\\],\n        response\\=sample\\_data\\[\"response\"\\],\n    )\n    print(\"=====\")\n    print(f\"Guideline: {guideline}\")\n    print(f\"Pass: {eval\\_result.passing}\")\n    print(f\"Feedback: {eval\\_result.feedback}\")\n\n\\=====\nGuideline: The response should fully answer the query.\nPass: False\nFeedback: The response does not fully answer the query. While it does provide a brief overview of global warming, it does not delve into the specifics of the causes, effects, or potential solutions to the problem. The response should be more detailed and comprehensive to fully answer the query.\n=====\nGuideline: The response should avoid being vague or ambiguous.\nPass: False\nFeedback: The response is too vague and does not provide specific details about global warming. It should include more information about the causes, effects, and potential solutions to global warming.\n=====\nGuideline: The response should be specific and use statistics or numbers when possible.\nPass: False\nFeedback: The response is too general and lacks specific details or statistics about global warming. It would be more informative if it included data such as the rate at which the Earth's temperature is rising, the main human activities contributing to global warming, or the specific adverse effects on the planet."
}