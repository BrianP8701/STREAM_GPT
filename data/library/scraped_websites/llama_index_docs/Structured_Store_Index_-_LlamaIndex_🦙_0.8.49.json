{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/api_reference/indices/struct_store.html",
        "title": "Structured Store Index - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## Structured Store Index[\uf0c1](#module-llama_index.indices.struct_store \"Permalink to this heading\")\n\nStructured store indices.\n\nllama\\_index.indices.struct\\_store.GPTNLStructStoreQueryEngine[\uf0c1](#llama_index.indices.struct_store.GPTNLStructStoreQueryEngine \"Permalink to this definition\")\n\nalias of [`NLStructStoreQueryEngine`](https://docs.llamaindex.ai/en/stable/api_reference/query/query_engines/sql_query_engine.html#llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine \"llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine\")\n\nllama\\_index.indices.struct\\_store.GPTPandasIndex[\uf0c1](#llama_index.indices.struct_store.GPTPandasIndex \"Permalink to this definition\")\n\nalias of [`PandasIndex`](#llama_index.indices.struct_store.PandasIndex \"llama_index.indices.struct_store.pandas.PandasIndex\")\n\nllama\\_index.indices.struct\\_store.GPTSQLStructStoreIndex[\uf0c1](#llama_index.indices.struct_store.GPTSQLStructStoreIndex \"Permalink to this definition\")\n\nalias of [`SQLStructStoreIndex`](#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.sql.SQLStructStoreIndex\")\n\nllama\\_index.indices.struct\\_store.GPTSQLStructStoreQueryEngine[\uf0c1](#llama_index.indices.struct_store.GPTSQLStructStoreQueryEngine \"Permalink to this definition\")\n\nalias of [`SQLStructStoreQueryEngine`](https://docs.llamaindex.ai/en/stable/api_reference/query/query_engines/sql_query_engine.html#llama_index.indices.struct_store.sql_query.SQLStructStoreQueryEngine \"llama_index.indices.struct_store.sql_query.SQLStructStoreQueryEngine\")\n\n_class_ llama\\_index.indices.struct\\_store.JSONQueryEngine(_json\\_value: Optional\\[Union\\[Dict\\[str, Optional\\[Union\\[Dict\\[str, JSONType\\], List\\[JSONType\\], str, int, float, bool\\]\\]\\], List\\[Optional\\[Union\\[Dict\\[str, JSONType\\], List\\[JSONType\\], str, int, float, bool\\]\\]\\], str, int, float, bool\\]\\]_, _json\\_schema: Optional\\[Union\\[Dict\\[str, Optional\\[Union\\[Dict\\[str, JSONType\\], List\\[JSONType\\], str, int, float, bool\\]\\]\\], List\\[Optional\\[Union\\[Dict\\[str, JSONType\\], List\\[JSONType\\], str, int, float, bool\\]\\]\\], str, int, float, bool\\]\\]_, _service\\_context: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_, _json\\_path\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _output\\_processor: Optional\\[Callable\\] \\= None_, _output\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _verbose: bool \\= False_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.JSONQueryEngine \"Permalink to this definition\")\n\nGPT JSON Query Engine.\n\nConverts natural language to JSON Path queries.\n\nParameters\n\n*   **json\\_value** (_JSONType_) \u2013 JSON value\n    \n*   **json\\_schema** (_JSONType_) \u2013 JSON schema\n    \n*   **service\\_context** ([_ServiceContext_](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")) \u2013 ServiceContext\n    \n*   **json\\_path\\_prompt** ([_BasePromptTemplate_](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")) \u2013 The JSON Path prompt to use.\n    \n*   **output\\_processor** (_Callable_) \u2013 The output processor that executes the JSON Path query.\n    \n*   **output\\_kwargs** (_dict_) \u2013 Additional output processor kwargs for the output\\_processor function.\n    \n*   **verbose** (_bool_) \u2013 Whether to print verbose output.\n    \n\n_class_ llama\\_index.indices.struct\\_store.NLSQLTableQueryEngine(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _tables: Optional\\[Union\\[List\\[str\\], List\\[Table\\]\\]\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _context\\_str\\_prefix: Optional\\[str\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.NLSQLTableQueryEngine \"Permalink to this definition\")\n\nNatural language SQL Table query engine.\n\nRead NLStructStoreQueryEngine\u2019s docstring for more info on NL SQL.\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.NLSQLTableQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.NLSQLTableQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever.\n\n_class_ llama\\_index.indices.struct\\_store.NLStructStoreQueryEngine(_index: [SQLStructStoreIndex](#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.sql.SQLStructStoreIndex\")_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.NLStructStoreQueryEngine \"Permalink to this definition\")\n\nGPT natural language query engine over a structured database.\n\nNOTE: deprecated in favor of SQLTableRetriever, kept for backward compatibility.\n\nGiven a natural language query, we will extract the query to SQL. Runs raw SQL over a SQLStructStoreIndex. No LLM calls are made during the SQL execution.\n\nNOTE: this query cannot work with composed indices - if the index contains subindices, those subindices will not be queried.\n\nParameters\n\n*   **index** ([_SQLStructStoreIndex_](#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.SQLStructStoreIndex\")) \u2013 A SQL Struct Store Index\n    \n*   **text\\_to\\_sql\\_prompt** (_Optional__\\[_[_BasePromptTemplate_](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")_\\]_) \u2013 A Text to SQL BasePromptTemplate to use for the query. Defaults to DEFAULT\\_TEXT\\_TO\\_SQL\\_PROMPT.\n    \n*   **context\\_query\\_kwargs** (_Optional__\\[__dict__\\]_) \u2013 Keyword arguments for the context query. Defaults to {}.\n    \n*   **synthesize\\_response** (_bool_) \u2013 Whether to synthesize a response from the query results. Defaults to True.\n    \n*   **response\\_synthesis\\_prompt** (_Optional__\\[_[_BasePromptTemplate_](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")_\\]_) \u2013 A Response Synthesis BasePromptTemplate to use for the query. Defaults to DEFAULT\\_RESPONSE\\_SYNTHESIS\\_PROMPT.\n    \n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.NLStructStoreQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_class_ llama\\_index.indices.struct\\_store.PandasIndex(_df: DataFrame_, _nodes: Optional\\[Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]\\] \\= None_, _index\\_struct: Optional\\[PandasStructTable\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.PandasIndex \"Permalink to this definition\")\n\nPandas Index.\n\nDeprecated. Please use `PandasQueryEngine` instead.\n\nThe PandasIndex is an index that stores a Pandas dataframe under the hood. Currently index \u201cconstruction\u201d is not supported.\n\nDuring query time, the user can either specify a raw SQL query or a natural language query to retrieve their data.\n\nParameters\n\n**pandas\\_df** (_Optional__\\[__pd.DataFrame__\\]_) \u2013 Pandas dataframe to use. See [Structured Index Configuration](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#ref-struct-store) for more details.\n\nbuild\\_index\\_from\\_nodes(_nodes: Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]_) \u2192 IS[\uf0c1](#llama_index.indices.struct_store.PandasIndex.build_index_from_nodes \"Permalink to this definition\")\n\nBuild the index from nodes.\n\ndelete\\_nodes(_node\\_ids: List\\[str\\]_, _delete\\_from\\_docstore: bool \\= False_, _\\*\\*delete\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.delete_nodes \"Permalink to this definition\")\n\nDelete a list of nodes from the index.\n\nParameters\n\n**doc\\_ids** (_List__\\[__str__\\]_) \u2013 A list of doc\\_ids from the nodes to delete\n\ndelete\\_ref\\_doc(_ref\\_doc\\_id: str_, _delete\\_from\\_docstore: bool \\= False_, _\\*\\*delete\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.delete_ref_doc \"Permalink to this definition\")\n\nDelete a document and it\u2019s nodes by using ref\\_doc\\_id.\n\n_classmethod_ from\\_documents(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _storage\\_context: Optional\\[[StorageContext](https://docs.llamaindex.ai/en/stable/api_reference/storage.html#llama_index.storage.storage_context.StorageContext \"llama_index.storage.storage_context.StorageContext\")\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _show\\_progress: bool \\= False_, _\\*\\*kwargs: Any_) \u2192 IndexType[\uf0c1](#llama_index.indices.struct_store.PandasIndex.from_documents \"Permalink to this definition\")\n\nCreate index from documents.\n\nParameters\n\n**documents** (_Optional__\\[__Sequence__\\[__BaseDocument__\\]__\\]_) \u2013 List of documents to build the index from.\n\n_property_ index\\_id_: str_[\uf0c1](#llama_index.indices.struct_store.PandasIndex.index_id \"Permalink to this definition\")\n\nGet the index struct.\n\ninsert(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*insert\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.insert \"Permalink to this definition\")\n\nInsert a document.\n\ninsert\\_nodes(_nodes: Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]_, _\\*\\*insert\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.insert_nodes \"Permalink to this definition\")\n\nInsert nodes.\n\n_property_ ref\\_doc\\_info_: Dict\\[str, RefDocInfo\\]_[\uf0c1](#llama_index.indices.struct_store.PandasIndex.ref_doc_info \"Permalink to this definition\")\n\nRetrieve a dict mapping of ingested documents and their nodes+metadata.\n\nrefresh(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _\\*\\*update\\_kwargs: Any_) \u2192 List\\[bool\\][\uf0c1](#llama_index.indices.struct_store.PandasIndex.refresh \"Permalink to this definition\")\n\nRefresh an index with documents that have changed.\n\nThis allows users to save LLM and Embedding model calls, while only updating documents that have any changes in text or metadata. It will also insert any documents that previously were not stored.\n\nrefresh\\_ref\\_docs(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _\\*\\*update\\_kwargs: Any_) \u2192 List\\[bool\\][\uf0c1](#llama_index.indices.struct_store.PandasIndex.refresh_ref_docs \"Permalink to this definition\")\n\nRefresh an index with documents that have changed.\n\nThis allows users to save LLM and Embedding model calls, while only updating documents that have any changes in text or metadata. It will also insert any documents that previously were not stored.\n\nset\\_index\\_id(_index\\_id: str_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.set_index_id \"Permalink to this definition\")\n\nSet the index id.\n\nNOTE: if you decide to set the index\\_id on the index\\_struct manually, you will need to explicitly call add\\_index\\_struct on the index\\_store to update the index store.\n\nParameters\n\n**index\\_id** (_str_) \u2013 Index id to set.\n\nupdate(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*update\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.update \"Permalink to this definition\")\n\nUpdate a document and it\u2019s corresponding nodes.\n\nThis is equivalent to deleting the document and then inserting it again.\n\nParameters\n\n*   **document** (_Union__\\[__BaseDocument__,_ [_BaseIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")_\\]_) \u2013 document to update\n    \n*   **insert\\_kwargs** (_Dict_) \u2013 kwargs to pass to insert\n    \n*   **delete\\_kwargs** (_Dict_) \u2013 kwargs to pass to delete\n    \n\nupdate\\_ref\\_doc(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*update\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.PandasIndex.update_ref_doc \"Permalink to this definition\")\n\nUpdate a document and it\u2019s corresponding nodes.\n\nThis is equivalent to deleting the document and then inserting it again.\n\nParameters\n\n*   **document** (_Union__\\[__BaseDocument__,_ [_BaseIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")_\\]_) \u2013 document to update\n    \n*   **insert\\_kwargs** (_Dict_) \u2013 kwargs to pass to insert\n    \n*   **delete\\_kwargs** (_Dict_) \u2013 kwargs to pass to delete\n    \n\n_class_ llama\\_index.indices.struct\\_store.SQLContextContainerBuilder(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _context\\_dict: Optional\\[Dict\\[str, str\\]\\] \\= None_, _context\\_str: Optional\\[str\\] \\= None_)[\uf0c1](#llama_index.indices.struct_store.SQLContextContainerBuilder \"Permalink to this definition\")\n\nSQLContextContainerBuilder.\n\nBuild a SQLContextContainer that can be passed to the SQL index during index construction or during query-time.\n\nNOTE: if context\\_str is specified, that will be used as context instead of context\\_dict\n\nParameters\n\n*   **sql\\_database** ([_SQLDatabase_](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")) \u2013 SQL database\n    \n*   **context\\_dict** (_Optional__\\[__Dict__\\[__str__,_ _str__\\]__\\]_) \u2013 context dict\n    \n\nbuild\\_context\\_container(_ignore\\_db\\_schema: bool \\= False_) \u2192 SQLContextContainer[\uf0c1](#llama_index.indices.struct_store.SQLContextContainerBuilder.build_context_container \"Permalink to this definition\")\n\nBuild index structure.\n\nderive\\_index\\_from\\_context(_index\\_cls: Type\\[[BaseIndex](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")\\]_, _ignore\\_db\\_schema: bool \\= False_, _\\*\\*index\\_kwargs: Any_) \u2192 [BaseIndex](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")[\uf0c1](#llama_index.indices.struct_store.SQLContextContainerBuilder.derive_index_from_context \"Permalink to this definition\")\n\nDerive index from context.\n\n_classmethod_ from\\_documents(_documents\\_dict: Dict\\[str, List\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]\\]_, _sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _\\*\\*context\\_builder\\_kwargs: Any_) \u2192 [SQLContextContainerBuilder](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder \"llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder\")[\uf0c1](#llama_index.indices.struct_store.SQLContextContainerBuilder.from_documents \"Permalink to this definition\")\n\nBuild context from documents.\n\nquery\\_index\\_for\\_context(_index: [BaseIndex](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")_, _query\\_str: Union\\[str, [QueryBundle](https://docs.llamaindex.ai/en/stable/api_reference/query/query_bundle.html#llama_index.indices.query.schema.QueryBundle \"llama_index.indices.query.schema.QueryBundle\")\\]_, _query\\_tmpl: Optional\\[str\\] \\= 'Please return the relevant tables (including the full schema) for the following query: {orig\\_query\\_str}'_, _store\\_context\\_str: bool \\= True_, _\\*\\*index\\_kwargs: Any_) \u2192 str[\uf0c1](#llama_index.indices.struct_store.SQLContextContainerBuilder.query_index_for_context \"Permalink to this definition\")\n\nQuery index for context.\n\nA simple wrapper around the index.query call which injects a query template to specifically fetch table information, and can store a context\\_str.\n\nParameters\n\n*   **index** ([_BaseIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")) \u2013 index data structure\n    \n*   **query\\_str** (_QueryType_) \u2013 query string\n    \n*   **query\\_tmpl** (_Optional__\\[__str__\\]_) \u2013 query template\n    \n*   **store\\_context\\_str** (_bool_) \u2013 store context\\_str\n    \n\n_class_ llama\\_index.indices.struct\\_store.SQLStructStoreIndex(_nodes: Optional\\[Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]\\] \\= None_, _index\\_struct: Optional\\[SQLStructTable\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _sql\\_database: Optional\\[[SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")\\] \\= None_, _table\\_name: Optional\\[str\\] \\= None_, _table: Optional\\[Table\\] \\= None_, _ref\\_doc\\_id\\_column: Optional\\[str\\] \\= None_, _sql\\_context\\_container: Optional\\[SQLContextContainer\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex \"Permalink to this definition\")\n\nSQL Struct Store Index.\n\nThe SQLStructStoreIndex is an index that uses a SQL database under the hood. During index construction, the data can be inferred from unstructured documents given a schema extract prompt, or it can be pre-loaded in the database.\n\nDuring query time, the user can either specify a raw SQL query or a natural language query to retrieve their data.\n\nNOTE: this is deprecated.\n\nParameters\n\n*   **documents** (_Optional__\\[__Sequence__\\[__DOCUMENTS\\_INPUT__\\]__\\]_) \u2013 Documents to index. NOTE: in the SQL index, this is an optional field.\n    \n*   **sql\\_database** (_Optional__\\[_[_SQLDatabase_](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_\\]_) \u2013 SQL database to use, including table names to specify. See [Structured Index Configuration](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#ref-struct-store) for more details.\n    \n*   **table\\_name** (_Optional__\\[__str__\\]_) \u2013 Name of the table to use for extracting data. Either table\\_name or table must be specified.\n    \n*   **table** (_Optional__\\[__Table__\\]_) \u2013 SQLAlchemy Table object to use. Specifying the Table object explicitly, instead of the table name, allows you to pass in a view. Either table\\_name or table must be specified.\n    \n*   **sql\\_context\\_container** (_Optional__\\[__SQLContextContainer__\\]_) \u2013 SQL context container. an be generated from a SQLContextContainerBuilder. See [Structured Index Configuration](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#ref-struct-store) for more details.\n    \n\nbuild\\_index\\_from\\_nodes(_nodes: Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]_) \u2192 IS[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.build_index_from_nodes \"Permalink to this definition\")\n\nBuild the index from nodes.\n\ndelete\\_nodes(_node\\_ids: List\\[str\\]_, _delete\\_from\\_docstore: bool \\= False_, _\\*\\*delete\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.delete_nodes \"Permalink to this definition\")\n\nDelete a list of nodes from the index.\n\nParameters\n\n**doc\\_ids** (_List__\\[__str__\\]_) \u2013 A list of doc\\_ids from the nodes to delete\n\ndelete\\_ref\\_doc(_ref\\_doc\\_id: str_, _delete\\_from\\_docstore: bool \\= False_, _\\*\\*delete\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.delete_ref_doc \"Permalink to this definition\")\n\nDelete a document and it\u2019s nodes by using ref\\_doc\\_id.\n\n_classmethod_ from\\_documents(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _storage\\_context: Optional\\[[StorageContext](https://docs.llamaindex.ai/en/stable/api_reference/storage.html#llama_index.storage.storage_context.StorageContext \"llama_index.storage.storage_context.StorageContext\")\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _show\\_progress: bool \\= False_, _\\*\\*kwargs: Any_) \u2192 IndexType[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.from_documents \"Permalink to this definition\")\n\nCreate index from documents.\n\nParameters\n\n**documents** (_Optional__\\[__Sequence__\\[__BaseDocument__\\]__\\]_) \u2013 List of documents to build the index from.\n\n_property_ index\\_id_: str_[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.index_id \"Permalink to this definition\")\n\nGet the index struct.\n\ninsert(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*insert\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.insert \"Permalink to this definition\")\n\nInsert a document.\n\ninsert\\_nodes(_nodes: Sequence\\[[BaseNode](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.BaseNode \"llama_index.schema.BaseNode\")\\]_, _\\*\\*insert\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.insert_nodes \"Permalink to this definition\")\n\nInsert nodes.\n\n_property_ ref\\_doc\\_info_: Dict\\[str, RefDocInfo\\]_[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.ref_doc_info \"Permalink to this definition\")\n\nRetrieve a dict mapping of ingested documents and their nodes+metadata.\n\nrefresh(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _\\*\\*update\\_kwargs: Any_) \u2192 List\\[bool\\][\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.refresh \"Permalink to this definition\")\n\nRefresh an index with documents that have changed.\n\nThis allows users to save LLM and Embedding model calls, while only updating documents that have any changes in text or metadata. It will also insert any documents that previously were not stored.\n\nrefresh\\_ref\\_docs(_documents: Sequence\\[[Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")\\]_, _\\*\\*update\\_kwargs: Any_) \u2192 List\\[bool\\][\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.refresh_ref_docs \"Permalink to this definition\")\n\nRefresh an index with documents that have changed.\n\nThis allows users to save LLM and Embedding model calls, while only updating documents that have any changes in text or metadata. It will also insert any documents that previously were not stored.\n\nset\\_index\\_id(_index\\_id: str_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.set_index_id \"Permalink to this definition\")\n\nSet the index id.\n\nNOTE: if you decide to set the index\\_id on the index\\_struct manually, you will need to explicitly call add\\_index\\_struct on the index\\_store to update the index store.\n\nParameters\n\n**index\\_id** (_str_) \u2013 Index id to set.\n\nupdate(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*update\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.update \"Permalink to this definition\")\n\nUpdate a document and it\u2019s corresponding nodes.\n\nThis is equivalent to deleting the document and then inserting it again.\n\nParameters\n\n*   **document** (_Union__\\[__BaseDocument__,_ [_BaseIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")_\\]_) \u2013 document to update\n    \n*   **insert\\_kwargs** (_Dict_) \u2013 kwargs to pass to insert\n    \n*   **delete\\_kwargs** (_Dict_) \u2013 kwargs to pass to delete\n    \n\nupdate\\_ref\\_doc(_document: [Document](https://docs.llamaindex.ai/en/stable/api_reference/node.html#llama_index.schema.Document \"llama_index.schema.Document\")_, _\\*\\*update\\_kwargs: Any_) \u2192 None[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreIndex.update_ref_doc \"Permalink to this definition\")\n\nUpdate a document and it\u2019s corresponding nodes.\n\nThis is equivalent to deleting the document and then inserting it again.\n\nParameters\n\n*   **document** (_Union__\\[__BaseDocument__,_ [_BaseIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices.html#llama_index.indices.base.BaseIndex \"llama_index.indices.base.BaseIndex\")_\\]_) \u2013 document to update\n    \n*   **insert\\_kwargs** (_Dict_) \u2013 kwargs to pass to insert\n    \n*   **delete\\_kwargs** (_Dict_) \u2013 kwargs to pass to delete\n    \n\n_class_ llama\\_index.indices.struct\\_store.SQLStructStoreQueryEngine(_index: [SQLStructStoreIndex](#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.sql.SQLStructStoreIndex\")_, _sql\\_context\\_container: Optional\\[[SQLContextContainerBuilder](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder \"llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder\")\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.SQLStructStoreQueryEngine \"Permalink to this definition\")\n\nGPT SQL query engine over a structured database.\n\nNOTE: deprecated in favor of SQLTableRetriever, kept for backward compatibility.\n\nRuns raw SQL over a SQLStructStoreIndex. No LLM calls are made here. NOTE: this query cannot work with composed indices - if the index contains subindices, those subindices will not be queried.\n\n_class_ llama\\_index.indices.struct\\_store.SQLTableRetrieverQueryEngine(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _table\\_retriever: ObjectRetriever\\[SQLTableSchema\\]_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _context\\_str\\_prefix: Optional\\[str\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.SQLTableRetrieverQueryEngine \"Permalink to this definition\")\n\nSQL Table retriever query engine.\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.SQLTableRetrieverQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.SQLTableRetrieverQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever."
}