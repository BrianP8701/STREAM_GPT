{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/api_reference/query/query_engines/sql_query_engine.html",
        "title": "SQL Query Engine - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## SQL Query Engine[\uf0c1](#module-llama_index.indices.struct_store.sql_query \"Permalink to this heading\")\n\nDefault query for SQLStructStoreIndex.\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.BaseSQLTableQueryEngine(_synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.BaseSQLTableQueryEngine \"Permalink to this definition\")\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.sql_query.BaseSQLTableQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_abstract property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.sql_query.BaseSQLTableQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever.\n\nllama\\_index.indices.struct\\_store.sql\\_query.GPTNLStructStoreQueryEngine[\uf0c1](#llama_index.indices.struct_store.sql_query.GPTNLStructStoreQueryEngine \"Permalink to this definition\")\n\nalias of [`NLStructStoreQueryEngine`](#llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine \"llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine\")\n\nllama\\_index.indices.struct\\_store.sql\\_query.GPTSQLStructStoreQueryEngine[\uf0c1](#llama_index.indices.struct_store.sql_query.GPTSQLStructStoreQueryEngine \"Permalink to this definition\")\n\nalias of [`SQLStructStoreQueryEngine`](#llama_index.indices.struct_store.sql_query.SQLStructStoreQueryEngine \"llama_index.indices.struct_store.sql_query.SQLStructStoreQueryEngine\")\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.NLSQLTableQueryEngine(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _tables: Optional\\[Union\\[List\\[str\\], List\\[Table\\]\\]\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _context\\_str\\_prefix: Optional\\[str\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.NLSQLTableQueryEngine \"Permalink to this definition\")\n\nNatural language SQL Table query engine.\n\nRead NLStructStoreQueryEngine\u2019s docstring for more info on NL SQL.\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.sql_query.NLSQLTableQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.sql_query.NLSQLTableQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever.\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.NLStructStoreQueryEngine(_index: [SQLStructStoreIndex](https://docs.llamaindex.ai/en/stable/api_reference/indices/struct_store.html#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.sql.SQLStructStoreIndex\")_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine \"Permalink to this definition\")\n\nGPT natural language query engine over a structured database.\n\nNOTE: deprecated in favor of SQLTableRetriever, kept for backward compatibility.\n\nGiven a natural language query, we will extract the query to SQL. Runs raw SQL over a SQLStructStoreIndex. No LLM calls are made during the SQL execution.\n\nNOTE: this query cannot work with composed indices - if the index contains subindices, those subindices will not be queried.\n\nParameters\n\n*   **index** ([_SQLStructStoreIndex_](https://docs.llamaindex.ai/en/stable/api_reference/indices/struct_store.html#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.SQLStructStoreIndex\")) \u2013 A SQL Struct Store Index\n    \n*   **text\\_to\\_sql\\_prompt** (_Optional__\\[_[_BasePromptTemplate_](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")_\\]_) \u2013 A Text to SQL BasePromptTemplate to use for the query. Defaults to DEFAULT\\_TEXT\\_TO\\_SQL\\_PROMPT.\n    \n*   **context\\_query\\_kwargs** (_Optional__\\[__dict__\\]_) \u2013 Keyword arguments for the context query. Defaults to {}.\n    \n*   **synthesize\\_response** (_bool_) \u2013 Whether to synthesize a response from the query results. Defaults to True.\n    \n*   **response\\_synthesis\\_prompt** (_Optional__\\[_[_BasePromptTemplate_](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")_\\]_) \u2013 A Response Synthesis BasePromptTemplate to use for the query. Defaults to DEFAULT\\_RESPONSE\\_SYNTHESIS\\_PROMPT.\n    \n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.sql_query.NLStructStoreQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.PGVectorSQLQueryEngine(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _tables: Optional\\[Union\\[List\\[str\\], List\\[Table\\]\\]\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _context\\_str\\_prefix: Optional\\[str\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.PGVectorSQLQueryEngine \"Permalink to this definition\")\n\nPGvector SQL query engine.\n\nA modified version of the normal text-to-SQL query engine because we can infer embedding vectors in the sql query.\n\nNOTE: this is a beta feature\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.sql_query.PGVectorSQLQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.sql_query.PGVectorSQLQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever.\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.SQLStructStoreQueryEngine(_index: [SQLStructStoreIndex](https://docs.llamaindex.ai/en/stable/api_reference/indices/struct_store.html#llama_index.indices.struct_store.SQLStructStoreIndex \"llama_index.indices.struct_store.sql.SQLStructStoreIndex\")_, _sql\\_context\\_container: Optional\\[[SQLContextContainerBuilder](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder \"llama_index.indices.struct_store.container_builder.SQLContextContainerBuilder\")\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.SQLStructStoreQueryEngine \"Permalink to this definition\")\n\nGPT SQL query engine over a structured database.\n\nNOTE: deprecated in favor of SQLTableRetriever, kept for backward compatibility.\n\nRuns raw SQL over a SQLStructStoreIndex. No LLM calls are made here. NOTE: this query cannot work with composed indices - if the index contains subindices, those subindices will not be queried.\n\n_class_ llama\\_index.indices.struct\\_store.sql\\_query.SQLTableRetrieverQueryEngine(_sql\\_database: [SQLDatabase](https://docs.llamaindex.ai/en/stable/api_reference/struct_store.html#llama_index.utilities.sql_wrapper.SQLDatabase \"llama_index.utilities.sql_wrapper.SQLDatabase\")_, _table\\_retriever: ObjectRetriever\\[SQLTableSchema\\]_, _text\\_to\\_sql\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _context\\_query\\_kwargs: Optional\\[dict\\] \\= None_, _synthesize\\_response: bool \\= True_, _response\\_synthesis\\_prompt: Optional\\[[BasePromptTemplate](https://docs.llamaindex.ai/en/stable/api_reference/prompts.html#llama_index.prompts.base.BasePromptTemplate \"llama_index.prompts.base.BasePromptTemplate\")\\] \\= None_, _service\\_context: Optional\\[[ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")\\] \\= None_, _context\\_str\\_prefix: Optional\\[str\\] \\= None_, _\\*\\*kwargs: Any_)[\uf0c1](#llama_index.indices.struct_store.sql_query.SQLTableRetrieverQueryEngine \"Permalink to this definition\")\n\nSQL Table retriever query engine.\n\n_property_ service\\_context_: [ServiceContext](https://docs.llamaindex.ai/en/stable/api_reference/service_context.html#llama_index.indices.service_context.ServiceContext \"llama_index.indices.service_context.ServiceContext\")_[\uf0c1](#llama_index.indices.struct_store.sql_query.SQLTableRetrieverQueryEngine.service_context \"Permalink to this definition\")\n\nGet service context.\n\n_property_ sql\\_retriever_: NLSQLRetriever_[\uf0c1](#llama_index.indices.struct_store.sql_query.SQLTableRetrieverQueryEngine.sql_retriever \"Permalink to this definition\")\n\nGet SQL retriever."
}