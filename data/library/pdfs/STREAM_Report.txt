S T R E A M   A I   1 
 
 1 
 
 R e a l - T i m e ,   M u l t i t h r e a d e d   A n o m a l y   D e t e c t i o n   S y s t e m   w i t h   A u t o n o m o u s 
 
 S y n c h r o n i z a t i o n   &   S e l f - C o r r e c t i o n 
 
 B r i a n   P r z e z d z i e c k i 
 
 U n i v e r s i t y   o f   B u f f a l o   ( S U N Y ) 
 
  S T R E A M   A I   1 
 
 2 
 
 A b s t r a c t 
 
 R e a l - t i m e   a n o m a l y   d e t e c t i o n   i s   c r u c i a l   d u r i n g   t h e   p r i n t i n g   p r o c e s s ,   e s p e c i a l l y   w h e n 
 
 l o o k i n g   f o r   i s s u e s   l i k e   o v e r   o r   u n d e r   e x t r u s i o n .   W e   e m p l o y   a   M o b i l e N e t   m o d e l   t o   c l a s s i f y   t h e s e 
 
 a n o m a l i e s .   O u r   s y s t e m   h a s   t w o   m a i n   c o m p o n e n t s :   T i p   T r a c k i n g   a n d   A n o m a l y   D e t e c t i o n .   I n   t h e 
 
 T i p   T r a c k i n g   p h a s e ,   w e   e s t i m a t e   t h e   l o c a t i o n s   o f   t h e   t i p s   u s i n g   g c o d e   d a t a .   T h e n ,   w e   u s e   t h e 
 
 Y O L O   m o d e l   t o   a l i g n   t h e s e   p r e d i c t i o n s   w i t h   l i v e   v i d e o   f o o t a g e ,   e n s u r i n g   s y n c h r o n i z a t i o n   a n d 
 
 c o r r e c t i n g   a n y   p r e d i c t i o n   i n a c c u r a c i e s .   G i v e n   t h e   n e e d   f o r   r e a l - t i m e   p e r f o r m a n c e   o n   a   R a s p b e r r y 
 
 P i ,   o u r   s y s t e m   i s   o p t i m i z e d   f o r   c o m p u t a t i o n a l   e f f i c i e n c y .   I t ' s   d e s i g n e d   t o   o p e r a t e   i n   r e a l - t i m e , 
 
 r u n n i n g   a l o n g s i d e   v i d e o   f e e d s ,   a n d   s t r i k e s   a   b a l a n c e   b e t w e e n   a c c u r a c y ,   a u t o n o m y ,   r o b u s t n e s s   a n d 
 
 s p e e d . 
 
  S T R E A M   A I   1 
 
 3 
 
 P r o b l e m 
 
 W e   n e e d   t o   s p o t   e r r o r s   i n   3 D   p r i n t i n g   a s   t h e y   h a p p e n .   T h e   m a i n   m i s t a k e s   a r e   t i e d   t o   h o w 
 
 m u c h   m a t e r i a l   c o m e s   o u t   -   t o o   m u c h   o r   t o o   l i t t l e   ( U n d e r / O v e r   E x t r u s i o n ) . 
 
 C l a s s e s : 
 
 O v e r 
 
 N o r m a l 
 
 U n d e r 
 
 A n o t h e r   p r o b l e m   a r i s e s :   G i v e n   a   f r a m e ,   t h e   o n l y   r e l e v a n t   i n f o r m a t i o n   i s   t h e   a r e a   a r o u n d   t h e   t i p   i n 
 
 t h e   d i r e c t i o n   o f   r e c e n t l y   e x t r u d e d   m a t e r i a l .   T h i s   i s   w h y   w e   n e e d   t o   t r a c k   t h e   t i p . 
 
  S T R E A M   A I   1 
 
 4 
 
 S o l u t i o n 
 
 T h e   g i v e n   d i a g r a m   d i s p l a y s   h o w   t h e   s y s t e m   i s   d i v i d e d   i n t o   d i s t i n c t   t h r e a d s   a n d   i l l u s t r a t e s 
 
 t h e   p r o c e s s   f l o w .   A l l   t h r e a d s   a c c e s s   s o m e   s h a r e d   g l o b a l   v a r i a b l e s .   T h e   t r a c k e r   t h r e a d   i n i t i a t e s   a n d 
 
 m a n a g e s   a l l   o t h e r   t h r e a d s .   T h i s   s y s t e m   p r i m a r i l y   r e v o l v e s   a r o u n d   t h r e e   k e y   c o m p o n e n t s : 
 
 1 .   I n i t i a l i z a t i o n :   P r e d i c t i n g   t h e   p a t h   o f   t i p   t r a c k i n g   a n d   a l i g n i n g   w i t h   t h e   v i d e o . 
 
 2 .   E r r o r   C o r r e c t i o n :   C o r r e c t i n g   e r r o r s   t h r o u g h   a   f e e d b a c k   l o o p . 
 
 3 .   A n a l y t i c s :   I d e n t i f y i n g   a n o m a l i e s . 
 
 F o r   t h e   f i r s t   t w o   s t e p s ,   w e   u t i l i z e   a   f i n e - t u n e d   Y o l o v 8 .   F o r   t h e   a n o m a l y   i d e n t i f i c a t i o n ,   w e   r e l y   o n 
 
 a   f i n e - t u n e d   M o b i l e N e t v 3   m o d e l . 
 
 W h y   w e   n e e d   T i p   T r a c k i n g   &   E x a m p l e s   o f   V i d e o   a n d   A n o m a l i e s 
 
  S T R E A M   A I   1 
 
 5 
 
 C h a l l e n g e s 
 
 T h i s   s y s t e m   i s   d e s i g n e d   w i t h   s i m p l i c i t y   a n d   v e r s a t i l i t y   i n   m i n d .   O u r   g o a l   i s   t o   m a k e   i t 
 
 r e a d i l y   a d o p t a b l e   f o r   a n y o n e ,   e n s u r i n g   i t   c a n   s e a m l e s s l y   i n t e g r a t e   w i t h   v a r i o u s   3 D   p r i n t e r s   i n 
 
 d i v e r s e   s e t t i n g s .   T h e r e ' s   n o   n e e d   f o r   a   p r e c i s e   c a m e r a   p l a c e m e n t ,   g i v i n g   u s e r s   f l e x i b i l i t y .   T h e 
 
 s y s t e m   a d j u s t s   t o   d i f f e r e n t   r e s o l u t i o n s ,   s i m p l i f y i n g   s e t u p   p r o c e s s e s . 
 
 I t ' s   b u i l t   t o   w o r k   w i t h   a n y   p r i n t e r   t h a t   o p e r a t e s   o n   g - c o d e ,   e v e n   i f   t h e   g - c o d e 
 
 i n t e r p r e t a t i o n s   v a r y .   W i t h   e d g e   d e p l o y m e n t   c a p a b i l i t i e s ,   i t   c a n   r u n   o n   a   R a s p b e r r y   P i ,   s t r e a m i n g 
 
 i n   r e a l   t i m e .   G i v e n   t h a t   t h e   Y O L O   m o d e l   m a y   o c c a s i o n a l l y   e r r   i n   o b j e c t   d e t e c t i o n ,   o u r   s y s t e m   i s 
 
 m a d e   t o   a c c o u n t   f o r   t h e s e   d i s c r e p a n c i e s .   M o r e o v e r ,   u s e r s   w i l l   b e n e f i t   f r o m   a   c l e a r   v i s u a l i z a t i o n 
 
 o f   t h e   t i p   t r a c k i n g   p r o c e d u r e . 
 
 G i v e n   t h e s e   c o n s t r a i n t s   a n d   r e q u i r e m e n t s ,   t h e   e n s u i n g   c h a l l e n g e s   a n d   o u r   t a i l o r e d 
 
 s o l u t i o n s   w i l l   b e   e l a b o r a t e d   b e l o w . 
 
  S T R E A M   A I   1 
 
 6 
 
 M o d e l   T r a i n i n g 
 
 h t t p s : / / g i t h u b . c o m / B r i a n P 8 7 0 1 / A n o m a l y _ C l a s s i f i c a t i o n 
 
 O b j e c t   D e t e c t i o n   f o r   T i p   T r a c k i n g 
 
 W e   u t i l i z e d   t h e   Y O L O v 8 s   m o d e l ,   a   p r o m i n e n t   o b j e c t   d e t e c t i o n   s y s t e m ,   a n d   f i n e - t u n e d   i t 
 
 t h r o u g h   R o b o f l o w ,   a   p l a t f o r m   t h a t   s t r e a m l i n e s   t h e   c o m p u t e r   v i s i o n   d a t a   p r o c e s s . 
 
 I n p u t   S i z e   D a t a s e t   S i z e   A u g m e n t a t i o n s   P r e c i s i o n   R e c a l l   M A P 5 0 
 
 6 4 0 x 6 4 0 
 
 2 4 0 7 
 
 1 2 0 0 
 
 0 . 9 6 7 
 
 0 . 9 3 1 
 
 0 . 9 6 8 
 
 W e   a d d e d   o n t o   o u r   d a t a s e t   a n d   r e t r a i n e d   m u l t i p l e   t i m e s ,   a i m i n g   t o   f i l l   i n   g a p s   a n d 
 
 w e a k n e s s e s   o f   t h e   m o d e l ,   a d d i n g   n u l l   i m a g e s   a n d   w r o n g   d e t e c t i o n s   e t c .   W e   a p p l i e d 
 
 a u g m e n t a t i o n s   o f   b l u r ,   n o i s e   a n d   b r i g h t n e s s . 
 
  S T R E A M   A I   1 
 
 7 
 
 O b j e c t   C l a s s i f i c a t i o n   f o r   A n o m a l i e s 
 
 W e   t e s t e d   v a r i o u s   m o d e l s ,   s e t t i n g s ,   a n d   p r e p r o c e s s i n g   m e t h o d s   t o   f i n d   t h e   b e s t   m o d e l . 
 
 O u r   d a t a   i s   l i m i t e d   b e c a u s e   o n l y   a   f e w   f r a m e s   i n   e a c h   v i d e o   s h o w   o v e r   o r   u n d e r   e x t r u s i o n , 
 
 m a k i n g   d a t a   c o l l e c t i o n   s l o w .   H e r e ' s   o u r   d a t a   p i p e l i n e : 
 
 E x a m i n i n g   t h e   p i p e l i n e :   I   d e v e l o p e d   s e v e r a l   G U I s   t o   a d d r e s s   t h e   i n i t i a l   d a t a   c o l l e c t i o n 
 
 b o t t l e n e c k .   I   o p t e d   f o r   a n   8 5 x 8 5   c r o p   s i z e   a s   i t   b e s t   c a p t u r e d   m a t e r i a l   n e a r   t h e   e x t r u s i o n   t i p .   I 
 
 u s e d   g r a y s c a l e   t o   r e d u c e   d i m e n s i o n s .   I n   s o m e   i m a g e s ,   e d g e s   a n d   m a t e r i a l   a r e   b a r e l y   v i s i b l e . 
 
 T h e r e f o r e ,   a   f i l t e r   w a s   u s e d   i n   p r e p r o c e s s i n g   t o   e n h a n c e   t h e s e   c r u c i a l   e d g e s . 
 
 I   i n i t i a l l y   a t t e m p t e d   a   f i l t e r   t h a t   s e g m e n t e d   t h e   i m a g e   i n t o 
 
 d i s t i n c t   c o l o r   i n t e n s i t i e s ,   u s i n g   t h e   o r i g i n a l   i m a g e ' s   c o l o r   i n t e n s i t y 
 
 s t a n d a r d   d e v i a t i o n .   W h i l e   s o m e w h a t   e f f e c t i v e ,   i t   m i s s e d   t h e 
 
 s u b t l e s t   e d g e s . 
 
  S T R E A M   A I   1 
 
 8 
 
 D r a w i n g   i n s p i r a t i o n   f r o m   t h e   c o n v o l u t i o n a l   o p e r a t i o n s   i n   C N N s ,   I 
 
 e x p e r i m e n t e d   w i t h   v a r i o u s   k e r n e l s   a n d   m a t r i x   f i l t e r   c o m b i n a t i o n s   o n   t h e 
 
 i m a g e s .   H o w e v e r ,   n o   s i n g l e   c o m b i n a t i o n   c o n s i s t e n t l y   w o r k e d   a c r o s s   a l l 
 
 i m a g e s .   I   t e s t e d   s t a n d a r d   f i l t e r s   s u c h   a s   t h e   N o n - l o c a l   M e a n s   D e n o i s i n g 
 
 f r o m   c v 2   a n d   t h e   U n s h a r p   M a s k   f r o m   P I L .   Y e t ,   n e i t h e r   s u c c e e d e d   i n 
 
 e n h a n c i n g   t h e   f a i n t   e d g e s . 
 
 A n   o b s e r v a t i o n   w a s   m a d e ,   e a c h   i m a g e   f e a t u r e s   a   l i m i t e d   s e t   o f   o b j e c t s   a n d   h u e s :   m a t e r i a l , 
 
 t i p ,   b e d ,   s h a d o w s ,   a n d   g l e a m .   E a c h   c o l o r   i n t e n s i t y   i n   t h e   i m a g e   u n i q u e l y   f o l l o w s   a   n o r m a l 
 
 d i s t r i b u t i o n   w i t h   i t s   d i s t i n c t   m e a n   a n d   v a r i a n c e .   H e n c e ,   G a u s s i a n   M i x t u r e   M o d e l s   a r e   a p t   f o r   t h i s 
 
 t a s k . 
 
  S T R E A M   A I   1 
 
 9 
 
 U s i n g   G a u s s i a n   M i x t u r e   M o d e l s ,   w e   c a n   s h a r p l y   d e f i n e   e v e n   t h e   s u b t l e s t   e d g e s .   I   t e s t e d 
 
 v a r i o u s   c o m p o n e n t   n u m b e r s ,   i n d i c a t i n g   t h e   a s s u m e d   G a u s s i a n s   i n   t h e   m i x t u r e .   N e x t ,   w e 
 
 p r i o r i t i z e   s e n s i t i v i t y   a r o u n d   b r i g h t e r   c o l o r s   s i n c e   i t ' s   c h a l l e n g i n g   t o   d i s c e r n   e d g e s   w h e n   m a t e r i a l 
 
 a c c u m u l a t e s .   T h i s   f o c u s   i g n o r e s   t h e   d a r k e r   b e d ,   w h i c h   i s n ' t   o f   c o n c e r n .   T h i s   f i n a l   r e f i n e m e n t 
 
 r e s u l t e d   i n   o u r   p r e p r o c e s s i n g   s t e p ,   d u b b e d   G M M S . 
 
 T h r o u g h   e x p e r i m e n t a t i o n ,   G M M S 6   i s   f o u n d   t o   p e r f o r m   t h e   b e s t   w h e n   t r a i n i n g   m o d e l s . 
 
  S T R E A M   A I   1 
 
 1 0 
 
 B a c k   t o   e x a m i n i n g   t h e   p i p e l i n e ,   t h e 
 
 i m a g e s   a r e   r e s i z e d   t o   2 2 4 x 2 2 4 ,   s u i t a b l e 
 
 f o r   E f f i c i e n t N e t ,   M o b i l e N e t ,   a n d 
 
 R e s N e t ,   w h i c h   h a v e   t r a i n e d   o n   t h e 
 
 2 2 4 x 2 2 4 - s i z e d   I m a g e N e t   d a t a s e t , 
 
 m a k i n g   t h e m   a d e p t   a t   r e c o g n i z i n g 
 
 f e a t u r e s   o f   t h i s   s c a l e .   P o s t - r e s i z i n g ,   t h e 
 
 i m a g e s   u n d e r g o   a u g m e n t a t i o n   a n d   a r e   s p l i t   i n t o   t r a i n i n g ,   v a l i d a t i o n ,   a n d   t e s t   d a t a s e t s . 
 
 D a t a s e t   S u m m a r y : 
 
 U n d e r :   4 3 6   i m a g e s   |   N o r m a l :   4 6 3   i m a g e s   |   O v e r :   4 4 6   i m a g e s 
 
 E x t r u s i o n   C l a s s i f i c a t i o n   D a t a s e t 
 
 A u g m e n t a t i o n s   f o r   e a c h   c l a s s   i n c l u d e   r o t a t i o n s ,   b r i g h t n e s s ,   s a t u r a t i o n ,   c o n t r a s t ,   h u e 
 
 a d j u s t m e n t s ,   a n d   f l i p s   ( b o t h   h o r i z o n t a l   a n d   v e r t i c a l )   c r e a t i n g   6 0   n e w   i m a g e s   p e r   c l a s s .   T h e   d a t a 
 
 d i s t r i b u t i o n   i s   7 5 %   f o r   t r a i n i n g ,   1 5 %   f o r   v a l i d a t i o n ,   a n d   1 0 %   f o r   t e s t i n g . 
 
 T r a i n i n g   S u m m a r y : 
 
 F i n e   t u n i n g ,   m o d e l   c h e c k p o i n t i n g ,   4   b a t c h e s ,   ~ 1 2   e p o c h s ,   l e a r n i n g   r a t e   d e c a y ,   e a r l y   s t o p p i n g . 
 
 l e a r n i n g _ r a t e = 0 . 0 1 ,   m o m e n t u m = 0 . 9 ,   s t e p _ s i z e = 5 ,   g a m m a = 0 . 1 
 
 A f t e r   t r i a l s   o f   v a r i o u s   m o d e l s ,   s e t t i n g s ,   h y p e r p a r a m e t e r s   a n d   p r e p r o c e s s i n g   s t e p s ,   t h e 
 
 c o m b i n a t i o n   o f   t h e   d e s c r i b e d   p r e p r o c e s s i n g   a n d   t r a i n i n g   p r o c e d u r e s   o u t l i n e d   a b o v e   y i e l d e d   t h e 
 
 h i g h e s t   a c c u r a c y .   T h e   s t a n d o u t   w a s   a   f i n e   t u n e d   M o b i l e N e t v 3 L a r g e   m o d e l ,   w h i c h   n o t   o n l y   w o n 
 
 i n   a c c u r a c y   b u t   a l s o   h a d   s u p e r i o r   c o m p u t a t i o n a l   e f f i c i e n c y . 
 
  S T R E A M   A I   1 
 
 1 1 
 
 T o   t h e   l e f t   s h o w s   o n e   o f   t h e 
 
 c o m p a r i s o n   r o u n d s ,   w h e r e   w e   i d e n t i f i e d 
 
 o u r   b e s t   p e r f o r m i n g   m o d e l .   H e r e   w e 
 
 c o m p a r e   3   d i f f e r e n t   s e t t i n g s   a n d   t h e i r 
 
 c o m b i n a t i o n s :   F i n e   t u n i n g 
 
 M o b i l e N e t v 3 S m a l l   v s   M o b i l e N e t v 3 L a r g e . 
 
 U s i n g   n o   G M M   p r e p r o c e s s i n g   v s   u s i n g 
 
 G M M   p r e p r o c e s s i n g   v s   u s i n g   G M M S 
 
 p r e p r o c e s s i n g   w i t h   a d d i t i o n a l   s e n s i t i v i t y 
 
 t o   m o r e   i n t e n s e   p i x e l s . 
 
 T h e   r e s u l t s   a r e   f i t t i n g ,   s h o w i n g   t h a t 
 
 i n d e e d   u s i n g   G M M S   w i t h   e x t r a 
 
 s e n s i t i v i t y   i s   b e n e f i c i a l ,   a n d   t r a i n i n g   t h e 
 
 l a r g e r   m o d e l   r e s u l t s   i n   b e t t e r 
 
 p e r f o r m a n c e .   T h e   t r a i n i n g   a n d   v a l i d a t i o n 
 
 m e t r i c s   a r e   n e a r l y   i n d i s t i n g u i s h a b l e 
 
 i n d i c a t i n g   t h a t   i t   i s   n o t   o v e r f i t t i n g . 
 
 B e s t   p e r f o r m i n g   m o d e l   a c c u r a c y : 
 
 0 . 9 0 2 5 9 7 4 0 2 5 9 7 4 0 2 6 
 
  S T R E A M   A I   1 
 
 1 2 
 
 I m p l e m e n t a t i o n 
 
 I n   t h i s   s e c t i o n   I   w i l l   d e s c r i b e   t h e   d e s i g n   c h o i c e s   a n d   d e t a i l s   o f   t h e   s y s t e m . 
 
 h t t p s : / / g i t h u b . c o m / B r i a n P 8 7 0 1 / S T R E A M . A I 
 
 I n p u t 
 
 1 .   G - C o d e : 
 
 I n s t r u c t i o n   s e t   f o r   3 D   p r i n t . 
 S i m p l e   a n d   s e q u e n t i a l :   i t   r u n s   f r o m   s t a r t   t o   f i n i s h . 
 S p e c i f i e s   t h e   t o p   s p e e d   a t   a n y   m o m e n t   a n d   p r o v i d e s   m o v e m e n t   c o o r d i n a t e s . 
 
 - 
 - 
 - 
 -   T h e   p r i n t e r   m o v e s   d i r e c t l y   f r o m   o n e   p o i n t   t o   t h e   n e x t   w i t h o u t   d e v i a t i o n . 
 
 2 .   V i d e o   S t r e a m : 
 
 -   L i v e   f o o t a g e   o f   t h e   3 D   p r i n t e r   b e d . 
 -   T h e   a n g l e   o f   t h e   c a m e r a   r e l a t i v e   t o   t h e   p r i n t e r   i s   e x p e c t e d   t o   b e   r o u g h l y   c o n s i s t e n t . 
 
 3 .   S i g n a l   S t r e a m : 
 
 -   M a n a g e d   b y   t h e   S K R   b o a r d ,   w h i c h   c o n t r o l s   t h e   3 D   p r i n t e r . 
 -   A   h a r d w a r e   c o n n e c t i o n   l i n k s   t h e   S K R   b o a r d   t o   o u r   R a s p b e r r y   P i . 
 -   T h e   R a s p b e r r y   P i   g e t s   a   s i g n a l   e v e r y   t i m e   a   m o v e m e n t   c o m p l e t e s .   T h i s   i s   t h e   s i g n a l ,   a n d 
 
 c o n s i s t s   o f   t h e   b e d   p o s i t i o n   a n d   t i m e .   [ t i m e ,   x ,   y ,   z ] 
 
 -   T h i s   d a t a   s t r e a m s   i n   r e a l   t i m e ,   p a r a l l e l   t o   t h e   p r i n t i n g   p r o c e s s . 
 
 I n i t i a l i z a t i o n 
 
 F i r s t   a n d   f o r e m o s t ,   t h e   s y s t e m ,   s t a r t i n g   i n   t h e   m a i n   T r a c k e r   T h r e a d ,   b e g i n s   r e c e i v i n g   a n d 
 
 r o u t i n g   f r a m e s   a n d   s i g n a l s   t h r o u g h   t h e i r   c o r r e s p o n d i n g   r o u t e r s .   T h e s e   r o u t e r s   w i l l   p a s s   t h e   d a t a 
 
 t o   t h e   c o r r e c t   o b j e c t s   a n d   t h r e a d s   t h r o u g h   t h e   s h a r e d   g l o b a l   v a r i a b l e   s p a c e   b a s e d   o n   t h e   c u r r e n t 
 
 s t a t e   o f   t h e   s y s t e m   ( I n i t i a l i z i n g   o r   T r a c k i n g ) . 
 
  S T R E A M   A I   1 
 
 1 3 
 
 T h e   d u t y   o f   t h e   i n i t i a l i z a t i o n   p h a s e   i s   t o   a u t o n o m o u s l y   a d a p t   t o   t h e   c a m e r a   p o s i t i o n .   I t 
 
 p r i m a r i l y   p e r f o r m s   t h e s e   t a s k s : 
 
 1 .   M a k e   i n i t i a l   p r e d i c t i o n s : 
 
 a .   T o   t r a n s f o r m   G - c o d e   i n t o   p r e d i c t i o n s   f o r   e v e r y 
 
 m o m e n t   i n   t i m e ,   w e   f i r s t   b r e a k   d o w n   t h e   G - c o d e 
 i n t o   a   s e q u e n c e   o f   m o t i o n   i n s t r u c t i o n s   b e t w e e n 
 c o r n e r s   ( o r   w a y p o i n t s )   w h e r e   t h e r e   a r e   c h a n g e s   i n 
 d i r e c t i o n   o r   s p e e d . 
 
 b .   F o r   e a c h   o f   t h e s e   m o t i o n s ,   w e   c a l c u l a t e   t h e   o p t i m a l 
 s p e e d   p r o f i l e   c o n s i d e r i n g   c o n s t r a i n t s   l i k e   m a x i m u m 
 s p e e d s   a n d   a c c e l e r a t i o n .   W e   n e e d   t o   l o o k   a t   t h e   f u t u r e   2   m o v e s   a s   w e l l ,   t o 
 d e t e r m i n e   w h a t   t h e   f i n a l   s p e e d   a t   t h e   e n d   o f   t h e   m o t i o n   s h o u l d   b e . 
 
 c .   G i v e n   t h e   o p t i m a l   s p e e d   p r o f i l e s   f o r   e a c h   m o t i o n ,   w e ’ l l   c a l c u l a t e   h o w   l o n g   e a c h 
 m o v e   s h o u l d   t a k e   u s i n g   k i n e m a t i c s .   O n e   p r o b l e m   c a n n o t   b e   s o l v e d   a n a l y t i c a l l y , 
 a n d   n e e d s   t o   b e   s o l v e d   i t e r a t i v e l y .   T h e   i t e r a t i v e   m e t h o d   t w e a k s   t h e   d i s t a n c e   o v e r 
 w h i c h   w e   a c c e l e r a t e   o r   d e c e l e r a t e ,   a t t e m p t i n g   t o   c o n v e r g e   o n   t h e   d e s i r e d   f i n a l 
 s p e e d   w i t h o u t   e x c e e d i n g   t h e   m a c h i n e ' s   c o n s t r a i n t s . 
 
 d .   A f t e r   c o m p u t i n g   t h e   s p e e d   p r o f i l e ,   t h e   s c r i p t   t h e n   d i v i d e s   t h e   m o t i o n   i n t o   f r a m e s 
 ( b a s e d   o n   t h e   g i v e n   f r a m e s - p e r - s e c o n d   p a r a m e t e r )   a n d   p r e d i c t s   t h e   p o s i t i o n   a n d 
 a n g l e   o f   t h e   m a c h i n e ' s   t i p   f o r   e a c h   f r a m e .   B y   t h e   e n d   o f   t h i s   p r o c e s s ,   w e   h a v e   a 
 d e t a i l e d   a c c o u n t   o f   w h e r e   t h e   m a c h i n e   s h o u l d   b e   a n d   a t   w h a t   a n g l e   f o r   e v e r y 
 s i n g l e   f r a m e   o f   t h e   m o t i o n . 
 
 2 .   D e r i v e   m i l l i m e t e r   t o   p i x e l   r a t i o : 
 
 F o r   r o b u s t n e s s ,   t h e   s y s t e m   w i l l   a u t o n o m o u s l y   m a p   b e d   p r e d i c t i o n s   t o   s c r e e n 
 p r e d i c t i o n s   w i t h o u t   r e q u i r i n g   u s e r s   t o   e n t e r   a n y   c o n f i g u r i n g   v a r i a b l e s .   B y   w a i t i n g 
 f o r   t w o   s i g n a l s   a n d   o b s e r v i n g   t h e i r   m i l l i m e t e r   d i s p a r i t y   o n   t h e   b e d ,   w e   c a n 
 c o r r e l a t e   t h i s   w i t h   t h e   p i x e l   d i f f e r e n c e   Y O L O   d e t e c t s ,   f a c i l i t a t i n g   t h e   n e c e s s a r y 
 c o n v e r s i o n .   W e   s l i d e   a   6 4 0 x 6 4 0   w i n d o w   a c r o s s   t h e   i m a g e   t o   r u n   Y O L O . 
 
 3 .   S y n c h r o n i z e   p r e d i c t i o n s   w i t h   v i d e o : 
 
 T o   i n i t i a t e   t h e   p r o c e s s ,   w e   a l i g n   o u r   s c r e e n   p r e d i c t i o n s   u s i n g   t h e   t i m e s t a m p   o f   t h e 
 f i r s t   Y O L O - s i g n a l   i n f e r e n c e   f r o m   t h e   v i d e o . 
 
  S T R E A M   A I   1 
 
 1 4 
 
 P r e d i c t i o n s   a r e   i m p e r f e c t   d u e   t o   a c c u m u l a t e d   s m a l l   t r a c k i n g   e r r o r s .   R e a s o n s   i n c l u d e : 
 
 1 .   M e r l i n   f i r m w a r e   i n   o u r   3 D   p r i n t e r   e m p l o y s   B e z i e t ’ s 
 
 6 t h   o r d e r   f u n c t i o n   f o r   m o v e m e n t   e x t r a p o l a t i o n ,   w h i l e 
 o u r   a l g o r i t h m   u s e s   a   s i m p l e r   2 n d   o r d e r   f u n c t i o n . 
 H o w e v e r ,   o u r   m o d e l   c o n s i d e r s   a c c e l e r a t i o n . 
 
 2 .   S o m e   p r i n t e r s   a d j u s t   m o v e m e n t   f a c t o r s ,   l i k e   s p e e d 
 
 a n d   a c c e l e r a t i o n . 
 
 3 .   M i n o r   d e v i a t i o n s   a r i s e   w h e n   t h e   p r i n t e r   h a l t s . 
 4 .   M e r l i n   F i r m w a r e   h a s   i n t r i c a t e   m e c h a n i s m s   f o r   g c o d e 
 
 i n t e r p r e t a t i o n . 
 
 I n s t e a d   o f   r e p l i c a t i n g   M e r l i n ' s   e x a c t   a p p r o a c h ,   w e   d e s i g n e d   a   s t r a i g h t f o r w a r d   i n t e r p r e t e r   w i t h 
 r e a l - t i m e   e r r o r   f e e d b a c k   l o o p s ,   e n h a n c i n g   s y s t e m   r o b u s t n e s s   a n d   c o m p a t i b i l i t y   w i t h   v a r i o u s   3 D 
 p r i n t e r s . 
 
 E r r o r   C o r r e c t i o n 
 
 P r e d i c t i o n s   f a c e   t w o   e r r o r   t y p e s :   T e m p o r a l   a n d   S p a t i a l ,   a d d r e s s e d   b y   t h e   E r r o r C o r r e c t i o n   t h r e a d . 
 
 1 .   S p a t i a l   E r r o r :   M a i n l y   a r i s e s   f r o m   i n c o r r e c t   r a t i o s   o r   Y O L O   i n f e r e n c e .   T h e s e   a r e   r a r e ,   t y p i c a l l y 
 
 m i n o r   i n i t i a l   t r a c k i n g   d e v i a t i o n s .   F o r   d e m o n s t r a t i o n ,   a n   e x a g g e r a t e d   e r r o r   w a s   i n t e n t i o n a l l y 
 
 i n t r o d u c e d   i n   t h e   S p a t i a l   E r r o r   C o r r e c t i o n   v i d e o . 
 
 M e a s u r e 
 
 D e t e c t 
 
 C o r r e c t 
 
 E v e r y t i m e   a   s i g n a l   a r r i v e s ,   w e   r u n 
 Y O L O   t o   s e e   w h e r e   t h e   t i p   i s .   W e 
 c o m p a r e   t h i s   t o   o u r   p r e d i c t i o n   a n d 
 m e a s u r e   t h e   d i f f e r e n c e   i n   p i x e l s . 
 
 W h e n   t h e r e   i s   a   c o n s i s t e n t   s p a t i a l   e r r o r 
 o f   t h e   s a m e   m a g n i t u d e   a n d   d i r e c t i o n   f o r 
 s u f f i c i e n t   t i m e . 
 
 S h i f t   a l l 
 p r e d i c t i o n s   b y 
 s p a t i a l   e r r o r . 
 
 2 .   T e m p o r a l   E r r o r :   T h i s   w a s   a   s i g n i f i c a n t   c h a l l e n g e .   W i t h o u t   i n p u t   s i g n a l s ,   g a u g i n g   t e m p o r a l 
 
 e r r o r   w a s   t o u g h .   T h e   u l t i m a t e   s o l u t i o n   s i m p l y   i n v o l v e d   i m m e d i a t e   m e a s u r e m e n t   a n d   c o r r e c t i o n 
 
  S T R E A M   A I   1 
 
 1 5 
 
 o f   t e m p o r a l   d i s c r e p a n c i e s .   T h i s   e r r o r   s t e m s   f r o m   v a r y i n g   i n t e r p r e t a t i o n s   o f   g c o d e ,   e s p e c i a l l y 
 
 d i f f e r i n g   a c c e l e r a t i o n s . 
 
 M e a s u r e 
 
 D e t e c t 
 
 E v e r y t i m e   a   s i g n a l   a r r i v e s ,   w e 
 c o m p a r e   t h e   t i m e   o f   t h e   s i g n a l , 
 c o m p a r e d   t o   o u r   p r e d i c t i o n s .   W e 
 m e a s u r e   e r r o r   i n   s e c o n d s . 
 
 W e   d o n ’ t   l o o k   f o r   a n y   c o n s i s t e n t 
 e r r o r s .   W h e n   t h e r e   i s   a n   e r r o r ,   w e 
 s i m p l y   p e r f o r m   a   c o r r e c t i o n . 
 
 C o r r e c t 
 
 P a u s e   o r   s k i p 
 a h e a d   t o   r e a l i g n . 
 
 A n a l y t i c s 
 
 I n c o r p o r a t i n g   a   r e a l - t i m e   f e e d b a c k   l o o p   ( a u t o n o m o u s   c o r r e c t i o n s )   r e s u l t s   i n   n e a r - f l a w l e s s   t i p 
 
 t r a c k i n g .   U s i n g   Y O L O   i s n ' t   c o n s t a n t ;   i t ' s   e m p l o y e d   d u r i n g   s i g n a l s   a n d   e r r o r   m e a s u r e m e n t s .   T h i s 
 
 e n a b l e s   e f f i c i e n t   p i n p o i n t i n g   o f   t h e   r e c e n t l y   e x t r u d e d   m a t e r i a l   a r o u n d   t h e   t i p — o u r   t a r g e t .   G i v e n 
 
 o u r   k n o w l e d g e   f r o m   t h e   g c o d e   a b o u t   t h e   p r i n t e r ' s   m o v e m e n t   d i r e c t i o n ,   w e   c r o p   a c c o r d i n g l y .   T h i s 
 
 c r o p p e d   i m a g e   t h e n   e n t e r s   o u r   d a t a   p r e p r o c e s s i n g   p i p e l i n e   a n d   u n d e r g o e s   c l a s s i f i c a t i o n   b y   t h e 
 
 t a i l o r e d   M o b i l e N e t   m o d e l ,   d e t e r m i n i n g   w h e t h e r   e x t r u s i o n   i s   u n d e r ,   n o r m a l ,   o r   o v e r . 
 
  S T R E A M   A I   1 
 
 1 6 
 
 M e t r i c s 
 
 T o   e v a l u a t e   o u r   s y s t e m ,   w e ' l l   f o c u s   o n   i t s   c o m p u t a t i o n a l   e f f i c i e n c y ,   w h i l e   t h e   a c c u r a c y   i s 
 
 d e r i v e d   f r o m   t h e   M o b i l e N e t   m o d e l ' s   t e s t   p e r f o r m a n c e .   W e ' l l   a s s e s s : 
 
 -   R A M   U s a g e :   W e ' l l   m o n i t o r   R A M   c o n s u m p t i o n   o v e r   t i m e . 
 - 
 
 I n f e r e n c e   I n t e r v a l s :   G i v e n   t h e   a d a p t i v e   n a t u r e   o f   o u r   M o b i l e N e t   m o d e l ,   o b s e r v i n g   t h e 
 i n t e r v a l s   b e t w e e n   s u c c e s s i v e   i n f e r e n c e s   p r o v i d e s   a   m e a s u r e   o f   s y s t e m   s p e e d .   T h e   m o d e l 
 r e f r a i n s   f r o m   i n f e r r i n g   w i t h   a   f u l l   b u f f e r . 
 
 T h e s e   m e t r i c s   w i l l   b e   g a u g e d   o n   b o t h   m y   d e v i c e   a n d   a   R a s p b e r r y   P i   4 ,   w i t h   r e s p e c t i v e 
 
 s p e c i f i c a t i o n s   p r o v i d e d   b e l o w . 
 
 D e p l o y m e n t   t o   R a s p b e r r y   P i 
 
 R a s p b e r r y   P i   M e t r i c s 
 
 F u t u r e   I m p r o v e m e n t s 
 
  S T R E A M   A I   1 
 
 1 7 
 
 1 .   P r o c e s s o r   ( C h i p s e t )   D e t a i l s : 
 
 -   M o d e l :   A p p l e   M 1   P r o 
 -   T o t a l   N u m b e r   o f   C o r e s :   1 4 
 
 2 .   M e m o r y : 
 
 -   S i z e :   1 6   G B 
 -   T y p e :   L P D D R 5 
 -   M a n u f a c t u r e r :   H y n i x 
 
 3 .   G r a p h i c s / G P U : 
 
 -   C h i p s e t   M o d e l :   A p p l e   M 1   P r o 
 -   M e t a l   S u p p o r t :   M e t a l   3 
 
 4 .   D i s p l a y : 
 
 -   T y p e :   B u i l t - i n   L i q u i d   R e t i n a   X D R   D i s p l a y 
 -   R e s o l u t i o n :   3 0 2 4   x   1 9 6 4   R e t i n a 
 
 5 .   S t o r a g e : 
 
 -   T y p e :   S S D   ( A P P L E   S S D   A P 0 5 1 2 R ) 
 -   C a p a c i t y :   5 0 0 . 2 8   G B 
 -   P r o t o c o l :   A p p l e   F a b r i c   ( i n d i c a t i n g   i t ' s   a n   N V M e   S S D ) 
 -   F r e e   S p a c e :   1 2 0 . 4   G B 
 
 6 .   F i l e   S y s t e m : 
 -   T y p e :   A P F S 
 
 h t t p s : / / q e n g i n e e r i n g . e u / i n s t a l l - o p e n c v - o n - r a s p b e r r y - p i . h t m l 
 h t t p s : / / q e n g i n e e r i n g . e u / i n s t a l l - p y t o r c h - o n - r a s p b e r r y - p i - 4 . h t m l 
 h t t p s : / / g i s t . g i t h u b . c o m / w e n i g / 8 b a b 8 8 d e d e 5 c 8 3 8 6 6 0 d d 0 5 b 8 e 5 b 2 e 2 3 b 
 h t t p s : / / o n n x r u n t i m e . a i / d o c s / t u t o r i a l s / i o t - e d g e / r a s p - p i - c v . h t m l 
 
 