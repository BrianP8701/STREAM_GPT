{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/low_level/response_synthesis.html",
        "title": "Building Response Synthesis from Scratch - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "\\*\\*\\*\\*\\*Formatted Prompt\\*\\*\\*\\*\\*:\nContext information is below.\n---------------------\n3.4\nRLHF Results\n3.4.1\nModel-Based Evaluation\nEvaluating LLMs is a challenging open-research problem. Human evaluation, while a gold standard, can\nbe complicated by various HCI considerations (Clark et al., 2021; Gehrmann et al., 2023), and is not always\nscalable. Thus, to select the best-performing models among several ablations at each iteration from RLHF-V1\nto V5, we first observed the improvement of the rewards from the latest reward models, to save costs and\nincrease iteration speed. We later validated major model versions with human evaluations.\nHow Far Can Model-Based Evaluation Go?\nTo measure the robustness of our reward model, we collected\na test set of prompts for both helpfulness and safety, and asked three annotators to judge the quality of the\nanswers based on a 7-point Likert scale (the higher the better). We observe that our reward models overall\nare well calibrated with our human preference annotations, as illustrated in Figure 29 in the appendix. This\nconfirms the relevance of using our reward as a point-wise metric, despite being trained with a Pairwise\nRanking Loss.\nStill, as Goodhart\u2019s Law states, when a measure becomes a target, it ceases to be a good measure. To ensure\nour measure won\u2019t diverge from the human preferences, we additionally used a more general reward, trained\n17\n\n5\nDiscussion\nHere, we discuss the interesting properties we have observed with RLHF (Section 5.1). We then discuss the\nlimitations of Llama 2-Chat (Section 5.2). Lastly, we present our strategy for responsibly releasing these\nmodels (Section 5.3).\n5.1\nLearnings and Observations\nOur tuning process revealed several interesting results, such as Llama 2-Chat\u2019s abilities to temporally\norganize its knowledge, or to call APIs for external tools.\nSFT (Mix)\nSFT (Annotation)\nRLHF (V1)\n0.0\n0.2\n0.4\n0.6\n0.8\n1.0\nReward Model Score\nRLHF (V2)\nFigure 20: Distribution shift for progressive versions of Llama 2-Chat, from SFT models towards RLHF.\nBeyond Human Supervision.\nAt the outset of the project, many among us expressed a preference for\nsupervised annotation, attracted by its denser signal. Meanwhile reinforcement learning, known for its insta-\nbility, seemed a somewhat shadowy field for those in the NLP research community. However, reinforcement\nlearning proved highly effective, particularly given its cost and time effectiveness. Our findings underscore\nthat the crucial determinant of RLHF\u2019s success lies in the synergy it fosters between humans and LLMs\nthroughout the annotation process.\nEven with proficient annotators, each individual writes with significant variation. A model fine-tuned on\nSFT annotation learns this diversity, including, unfortunately, the tail-end of poorly executed annotation. Fur-\nthermore, the model\u2019s performance is capped by the writing abilities of the most skilled annotators. Human\nannotators are arguably less subject to discrepancy when comparing two outputs\u2019 preference annotation\nfor RLHF. Consequently, the reward mechanism swiftly learns to assign low scores to undesirable tail-end\ndistribution and aligns towards the human preference. This phenomena is illustrated in Figure 20, where we\ncan see that the worst answers are progressively removed, shifting the distribution to the right.\nIn addition, during annotation, the model has the potential to venture into writing trajectories that even the\nbest annotators may not chart. Nonetheless, humans can still provide valuable feedback when comparing two\nanswers, beyond their own writing competencies. Drawing a parallel, while we may not all be accomplished\nartists, our ability to appreciate and critique art remains intact. We posit that the superior writing abilities of\nLLMs, as manifested in surpassing human annotators in certain tasks, are fundamentally driven by RLHF, as\ndocumented in Gilardi et al. (2023) and Huang et al. (2023). Supervised data may no longer be the gold\nstandard, and this evolving circumstance compels a re-evaluation of the concept of \u201csupervision.\u201d\nIn-Context Temperature Rescaling.\nWe have observed an intriguing phenomenon related to RLHF, a feature\nnot previously reported to the best of our knowledge: the dynamic re-scaling of temperature contingent upon\nthe context. As indicated in Figure 8, the temperature appears to be influenced by RLHF. Yet, intriguingly,\nour findings also revealed that the shifts are not uniformly applied across all prompts, as shown in Figure 21.\nFor instance, when it comes to prompts associated with creativity, such as \u201cWrite a poem,\u201d an increase in\ntemperature continues to generate diversity across our various RLHF iterations. This can be observed in the\nSelf-BLEU slope, which mirrors a pattern comparable to that of the SFT model.\nOn the other hand, for prompts based on factual information, such as \u201cWhat is the capital of ?\u201d the Self-BLEU\nslope diminishes over time. This pattern suggests that despite the rising temperature, the model learns to\nconsistently provide the same response to factual prompts.\n32\n---------------------\nGiven the context information and not prior knowledge, answer the query.\nQuery: Can you tell me about results from RLHF using both model-based and human-based evaluation?\nAnswer:"
}