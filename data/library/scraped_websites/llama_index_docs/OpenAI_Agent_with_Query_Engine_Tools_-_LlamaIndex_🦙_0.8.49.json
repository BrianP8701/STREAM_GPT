{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/agent/openai_agent_with_query_engine.html",
        "title": "OpenAI Agent with Query Engine Tools - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "## Build Query Engine Tools[\uf0c1](#build-query-engine-tools \"Permalink to this heading\")\n\nfrom llama\\_index import (\n    SimpleDirectoryReader,\n    VectorStoreIndex,\n    StorageContext,\n    load\\_index\\_from\\_storage,\n)\n\nfrom llama\\_index.tools import QueryEngineTool, ToolMetadata\n\ntry:\n    storage\\_context \\= StorageContext.from\\_defaults(\n        persist\\_dir\\=\"./storage/lyft\"\n    )\n    lyft\\_index \\= load\\_index\\_from\\_storage(storage\\_context)\n\n    storage\\_context \\= StorageContext.from\\_defaults(\n        persist\\_dir\\=\"./storage/uber\"\n    )\n    uber\\_index \\= load\\_index\\_from\\_storage(storage\\_context)\n\n    index\\_loaded \\= True\nexcept:\n    index\\_loaded \\= False\n\nif not index\\_loaded:\n    \\# load data\n    lyft\\_docs \\= SimpleDirectoryReader(\n        input\\_files\\=\\[\"../data/10k/lyft\\_2021.pdf\"\\]\n    ).load\\_data()\n    uber\\_docs \\= SimpleDirectoryReader(\n        input\\_files\\=\\[\"../data/10k/uber\\_2021.pdf\"\\]\n    ).load\\_data()\n\n    \\# build index\n    lyft\\_index \\= VectorStoreIndex.from\\_documents(lyft\\_docs)\n    uber\\_index \\= VectorStoreIndex.from\\_documents(uber\\_docs)\n\n    \\# persist index\n    lyft\\_index.storage\\_context.persist(persist\\_dir\\=\"./storage/lyft\")\n    uber\\_index.storage\\_context.persist(persist\\_dir\\=\"./storage/uber\")\n\nlyft\\_engine \\= lyft\\_index.as\\_query\\_engine(similarity\\_top\\_k\\=3)\nuber\\_engine \\= uber\\_index.as\\_query\\_engine(similarity\\_top\\_k\\=3)\n\nquery\\_engine\\_tools \\= \\[\n    QueryEngineTool(\n        query\\_engine\\=lyft\\_engine,\n        metadata\\=ToolMetadata(\n            name\\=\"lyft\\_10k\",\n            description\\=(\n                \"Provides information about Lyft financials for year 2021. \"\n                \"Use a detailed plain text question as input to the tool.\"\n            ),\n        ),\n    ),\n    QueryEngineTool(\n        query\\_engine\\=uber\\_engine,\n        metadata\\=ToolMetadata(\n            name\\=\"uber\\_10k\",\n            description\\=(\n                \"Provides information about Uber financials for year 2021. \"\n                \"Use a detailed plain text question as input to the tool.\"\n            ),\n        ),\n    ),\n\\]"
}