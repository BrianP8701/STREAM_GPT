{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/vector_stores/QdrantIndexDemo.html",
        "title": "Qdrant Vector Store - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## Qdrant Vector Store[\uf0c1](#qdrant-vector-store \"Permalink to this heading\")\n\n## Creating a Qdrant client[\uf0c1](#creating-a-qdrant-client \"Permalink to this heading\")\n\nimport logging\nimport sys\nimport os\n\nimport qdrant\\_client\nfrom IPython.display import Markdown, display\nfrom llama\\_index import (\n    VectorStoreIndex,\n    ServiceContext,\n    SimpleDirectoryReader,\n)\nfrom llama\\_index.storage.storage\\_context import StorageContext\nfrom llama\\_index.vector\\_stores.qdrant import QdrantVectorStore\n\nIf running this for the first, time, install using this command:\n\n!pip install -U qdrant\\_client\n\nos.environ\\[\"OPENAI\\_API\\_KEY\"\\] \\= \"YOUR OPENAI API KEY\"\n\nlogging.basicConfig(stream\\=sys.stdout, level\\=logging.INFO)\nlogging.getLogger().addHandler(logging.StreamHandler(stream\\=sys.stdout))\n\n## Load the documents[\uf0c1](#load-the-documents \"Permalink to this heading\")\n\n\\# load documents\ndocuments \\= SimpleDirectoryReader(\"../data/paul\\_graham\").load\\_data()\n\n## Build the VectorStoreIndex[\uf0c1](#build-the-vectorstoreindex \"Permalink to this heading\")\n\nclient \\= qdrant\\_client.QdrantClient(\n    \\# you can use :memory: mode for fast and light-weight experiments,\n    \\# it does not require to have Qdrant deployed anywhere\n    \\# but requires qdrant-client >= 1.1.1\n    location\\=\":memory:\"\n    \\# otherwise set Qdrant instance address with:\n    \\# uri=\"http://<host>:<port>\"\n    \\# set API KEY for Qdrant Cloud\n    \\# api\\_key=\"<qdrant-api-key>\",\n)\n\nservice\\_context \\= ServiceContext.from\\_defaults()\nvector\\_store \\= QdrantVectorStore(client\\=client, collection\\_name\\=\"paul\\_graham\")\nstorage\\_context \\= StorageContext.from\\_defaults(vector\\_store\\=vector\\_store)\nindex \\= VectorStoreIndex.from\\_documents(\n    documents, storage\\_context\\=storage\\_context, service\\_context\\=service\\_context\n)\n\n## Query Index[\uf0c1](#query-index \"Permalink to this heading\")\n\n\\# set Logging to DEBUG for more detailed outputs\nquery\\_engine \\= index.as\\_query\\_engine()\nresponse \\= query\\_engine.query(\"What did the author do growing up?\")\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**The author worked on writing and programming outside of school before college. They wrote short stories and tried writing programs on the IBM 1401 computer. They also mentioned getting a microcomputer, specifically a TRS-80, and started programming on it.**\n\n\\# set Logging to DEBUG for more detailed outputs\nquery\\_engine \\= index.as\\_query\\_engine()\nresponse \\= query\\_engine.query(\n    \"What did the author do after his time at Viaweb?\"\n)\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**After his time at Viaweb, the author decided to pursue his passion for painting. He left Yahoo, where he had been working after Viaweb was acquired, and immediately started painting. However, he struggled with energy and ambition, and eventually returned to New York to resume his old life as a painter.**\n\n## Build the VectorStoreIndex asynchronously[\uf0c1](#build-the-vectorstoreindex-asynchronously \"Permalink to this heading\")\n\n\\# To connect to the same event-loop,\n\\# allows async events to run on notebook\n\nimport nest\\_asyncio\n\nnest\\_asyncio.apply()\n\nclient \\= qdrant\\_client.QdrantClient(\n    \\# location=\":memory:\"\n    \\# Async upsertion does not work\n    \\# on 'memory' location and requires\n    \\# Qdrant to be deployed somewhere.\n    url\\=\"http://localhost:6334\",\n    prefer\\_grpc\\=True,\n    \\# set API KEY for Qdrant Cloud\n    \\# api\\_key=\"<qdrant-api-key>\",\n)\n\nservice\\_context \\= ServiceContext.from\\_defaults()\nvector\\_store \\= QdrantVectorStore(\n    client\\=client, collection\\_name\\=\"paul\\_graham\", prefer\\_grpc\\=True\n)\nstorage\\_context \\= StorageContext.from\\_defaults(vector\\_store\\=vector\\_store)\nindex \\= VectorStoreIndex.from\\_documents(\n    documents,\n    storage\\_context\\=storage\\_context,\n    service\\_context\\=service\\_context,\n    use\\_async\\=True,\n)\n\n## Async Query Index[\uf0c1](#async-query-index \"Permalink to this heading\")\n\nquery\\_engine \\= index.as\\_query\\_engine(use\\_async\\=True)\nresponse \\= await query\\_engine.aquery(\"What did the author do growing up?\")\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**The author worked on writing and programming outside of school. They wrote short stories and tried writing programs on the IBM 1401 computer. They also built a microcomputer and started programming on it, writing simple games and a word processor.**\n\n\\# set Logging to DEBUG for more detailed outputs\nquery\\_engine \\= index.as\\_query\\_engine(use\\_async\\=True)\nresponse \\= await query\\_engine.aquery(\n    \"What did the author do after his time at Viaweb?\"\n)\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**After his time at Viaweb, the author started working on a new idea. He decided to move to Cambridge and start a new company. However, he faced difficulties in finding a partner to work on the idea with him. Eventually, he recruited a team and began building a new dialect of Lisp called Arc. He also gave a talk at a Lisp conference and posted a file of the talk online, which gained a significant audience.**"
}