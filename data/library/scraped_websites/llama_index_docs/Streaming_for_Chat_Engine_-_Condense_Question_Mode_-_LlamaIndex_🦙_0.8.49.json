{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/customization/streaming/chat_engine_condense_question_stream_response.html",
        "title": "Streaming for Chat Engine - Condense Question Mode - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\nLoad documents, build the VectorStoreIndex\n\nimport logging\nimport sys\n\nlogging.basicConfig(stream\\=sys.stdout, level\\=logging.INFO)\nlogging.getLogger().addHandler(logging.StreamHandler(stream\\=sys.stdout))\n\nfrom llama\\_index import VectorStoreIndex, SimpleDirectoryReader\n\nINFO:numexpr.utils:Note: NumExpr detected 12 cores but \"NUMEXPR\\_MAX\\_THREADS\" not set, so enforcing safe limit of 8.\nNote: NumExpr detected 12 cores but \"NUMEXPR\\_MAX\\_THREADS\" not set, so enforcing safe limit of 8.\nINFO:numexpr.utils:NumExpr defaulting to 8 threads.\nNumExpr defaulting to 8 threads.\n\n/Users/suo/miniconda3/envs/llama/lib/python3.9/site-packages/deeplake/util/check\\_latest\\_version.py:32: UserWarning: A newer version of deeplake (3.6.7) is available. It's recommended that you update to the latest version using \\`pip install -U deeplake\\`.\n  warnings.warn(\n\n\\# load documents\ndocuments \\= SimpleDirectoryReader(\"../../data/paul\\_graham\").load\\_data()\n\nindex \\= VectorStoreIndex.from\\_documents(documents)\n\nChat with your data\n\nchat\\_engine \\= index.as\\_chat\\_engine(\n    chat\\_mode\\=\"condense\\_question\", streaming\\=True\n)\nresponse\\_stream \\= chat\\_engine.chat(\"What did Paul Graham do after YC?\")\n\nINFO:llama\\_index.chat\\_engine.condense\\_question:Querying with: What was the next step in Paul Graham's career after his involvement with Y Combinator?\nQuerying with: What was the next step in Paul Graham's career after his involvement with Y Combinator?\n\nresponse\\_stream.print\\_response\\_stream()\n\nPaul Graham's next step in his career after his involvement with Y Combinator was to take up painting. He spent most of the rest of 2014 painting and then in March 2015 he started working on Lisp again.\n\nAsk a follow up question\n\nresponse\\_stream \\= chat\\_engine.chat(\"What about after that?\")\n\nINFO:llama\\_index.chat\\_engine.condense\\_question:Querying with: What did Paul Graham do after he started working on Lisp again in March 2015?\nQuerying with: What did Paul Graham do after he started working on Lisp again in March 2015?\n\nresponse\\_stream.print\\_response\\_stream()\n\nPaul Graham spent the rest of 2015 writing essays and working on the new dialect of Lisp he called Arc. He also looked for an apartment to buy and started to plan a second still life painting from the same objects.\n\nresponse\\_stream \\= chat\\_engine.chat(\"Can you tell me more?\")\n\nINFO:llama\\_index.chat\\_engine.condense\\_question:Querying with: What did Paul Graham do after he started working on the new dialect of Lisp he called Arc in 2015?\nQuerying with: What did Paul Graham do after he started working on the new dialect of Lisp he called Arc in 2015?\n\nresponse\\_stream.print\\_response\\_stream()\n\nPaul Graham worked on the new dialect of Lisp he called Arc for four years, from March 26, 2015 to October 12, 2019. During this time, he wrote the new Lisp, called Bel, in Arc. He also wrote essays and took his children to the coast on a sunny day in 2015. In the summer of 2016, he and his family moved to England. Finally, in the fall of 2019, he finished the project.\n\nReset conversation state\n\nresponse\\_stream \\= chat\\_engine.chat(\"What about after that?\")\n\nINFO:llama\\_index.chat\\_engine.condense\\_question:Querying with: What happens after the current situation?\nQuerying with: What happens after the current situation?\n\nresponse\\_stream.print\\_response\\_stream()\n\nAfter the current situation, the narrator resumes painting and experimenting with a new kind of still life. He also resumes his old life in New York, now that he is rich. He is able to take taxis and eat in restaurants, which is exciting for a while. He also starts to connect with other people who are trying to paint in New York."
}