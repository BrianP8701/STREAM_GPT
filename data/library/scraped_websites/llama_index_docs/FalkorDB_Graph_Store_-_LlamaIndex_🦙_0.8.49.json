{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/index_structs/knowledge_graph/FalkorDBGraphDemo.html",
        "title": "FalkorDB Graph Store - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## FalkorDB Graph Store[\uf0c1](#falkordb-graph-store \"Permalink to this heading\")\n\nThis notebook walks through configuring `FalkorDB` to be the backend for graph storage in LlamaIndex.\n\n\\# My OpenAI Key\nimport os\n\nos.environ\\[\"OPENAI\\_API\\_KEY\"\\] \\= \"API\\_KEY\\_HERE\"\n\nimport logging\nimport sys\n\nlogging.basicConfig(stream\\=sys.stdout, level\\=logging.INFO)\n\n## Using Knowledge Graph with FalkorDBGraphStore[\uf0c1](#using-knowledge-graph-with-falkordbgraphstore \"Permalink to this heading\")\n\n### Start FalkorDB[\uf0c1](#start-falkordb \"Permalink to this heading\")\n\nThe easiest way to start FalkorDB as a Graph database is using the [falkordb](https://hub.docker.com/r/falkordb/falkordb:edge) docker image.\n\nTo follow every step of this tutorial, launch the image as follows:\n\ndocker run \\-p 6379:6379 \\-it \\--rm falkordb/falkordb:edge\n\nfrom llama\\_index.graph\\_stores import FalkorDBGraphStore\n\ngraph\\_store \\= FalkorDBGraphStore(\n    \"redis://localhost:6379\", decode\\_responses\\=True\n)\n\nINFO:numexpr.utils:NumExpr defaulting to 8 threads.\n\n#### Building the Knowledge Graph[\uf0c1](#building-the-knowledge-graph \"Permalink to this heading\")\n\nfrom llama\\_index import (\n    SimpleDirectoryReader,\n    ServiceContext,\n    KnowledgeGraphIndex,\n)\n\nfrom llama\\_index.llms import OpenAI\nfrom IPython.display import Markdown, display\n\ndocuments \\= SimpleDirectoryReader(\n    \"../../../../examples/paul\\_graham\\_essay/data\"\n).load\\_data()\n\n\\# define LLM\n\nllm \\= OpenAI(temperature\\=0, model\\=\"gpt-3.5-turbo\")\nservice\\_context \\= ServiceContext.from\\_defaults(llm\\=llm, chunk\\_size\\=512)\n\nfrom llama\\_index.storage.storage\\_context import StorageContext\n\nstorage\\_context \\= StorageContext.from\\_defaults(graph\\_store\\=graph\\_store)\n\n\\# NOTE: can take a while!\nindex \\= KnowledgeGraphIndex.from\\_documents(\n    documents,\n    max\\_triplets\\_per\\_chunk\\=2,\n    storage\\_context\\=storage\\_context,\n    service\\_context\\=service\\_context,\n)\n\n#### Querying the Knowledge Graph[\uf0c1](#querying-the-knowledge-graph \"Permalink to this heading\")\n\nFirst, we can query and send only the triplets to the LLM.\n\nquery\\_engine \\= index.as\\_query\\_engine(\n    include\\_text\\=False, response\\_mode\\=\"tree\\_summarize\"\n)\nresponse \\= query\\_engine.query(\n    \"Tell me more about Interleaf\",\n)\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**Interleaf is a software company that was founded in 1981. It specialized in developing and selling desktop publishing software. The company\u2019s flagship product was called Interleaf, which was a powerful tool for creating and publishing complex documents. Interleaf\u2019s software was widely used in industries such as aerospace, defense, and government, where there was a need for creating technical documentation and manuals. The company was acquired by BroadVision in 2000.**\n\nFor more detailed answers, we can also send the text from where the retrieved tripets were extracted.\n\nquery\\_engine \\= index.as\\_query\\_engine(\n    include\\_text\\=True, response\\_mode\\=\"tree\\_summarize\"\n)\nresponse \\= query\\_engine.query(\n    \"Tell me more about Interleaf\",\n)\n\ndisplay(Markdown(f\"<b>{response}</b>\"))\n\n**Interleaf was a company that had smart people and built impressive technology. However, it faced challenges and eventually got crushed by Moore\u2019s Law. The exponential growth in the power of commodity processors, particularly Intel processors, in the 1990s led to the consolidation of high-end, special-purpose hardware and software companies. Interleaf was one of the casualties of this trend. While the company had talented individuals and advanced technology, it was unable to compete with the rapid advancements in processor power.**\n\n#### Visualizing the Graph[\uf0c1](#visualizing-the-graph \"Permalink to this heading\")\n\n\\## create graph\nfrom pyvis.network import Network\n\ng \\= index.get\\_networkx\\_graph()\nnet \\= Network(notebook\\=True, cdn\\_resources\\=\"in\\_line\", directed\\=True)\nnet.from\\_nx(g)\nnet.show(\"falkordbgraph\\_draw.html\")"
}