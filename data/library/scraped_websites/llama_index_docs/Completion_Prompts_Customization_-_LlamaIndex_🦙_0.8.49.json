{
    "metadata": {
        "type": "web",
        "url": "https://docs.llamaindex.ai/en/stable/examples/customization/prompts/completion_prompts.html",
        "title": "Completion Prompts Customization - LlamaIndex \ud83e\udd99 0.8.49",
        "description": null
    },
    "text": "[Back to top](#)\n\nToggle table of contents sidebar\n\n## Completion Prompts Customization[\uf0c1](#completion-prompts-customization \"Permalink to this heading\")\n\n## Prompt Setup[\uf0c1](#prompt-setup \"Permalink to this heading\")\n\nBelow, we take the default prompts and customize them to always answer, even if the context is not helpful.\n\nfrom llama\\_index.prompts import PromptTemplate\n\ntext\\_qa\\_template\\_str \\= (\n    \"Context information is\"\n    \" below.\\\\n\\---------------------\\\\n{context\\_str}\\\\n\\---------------------\\\\nUsing\"\n    \" both the context information and also using your own knowledge, answer\"\n    \" the question: {query\\_str}\\\\nIf the context isn't helpful, you can also\"\n    \" answer the question on your own.\\\\n\"\n)\ntext\\_qa\\_template \\= PromptTemplate(text\\_qa\\_template\\_str)\n\nrefine\\_template\\_str \\= (\n    \"The original question is as follows: {query\\_str}\\\\nWe have provided an\"\n    \" existing answer: {existing\\_answer}\\\\nWe have the opportunity to refine\"\n    \" the existing answer (only if needed) with some more context\"\n    \" below.\\\\n\\------------\\\\n{context\\_msg}\\\\n\\------------\\\\nUsing both the new\"\n    \" context and your own knowledge, update or repeat the existing answer.\\\\n\"\n)\nrefine\\_template \\= PromptTemplate(refine\\_template\\_str)\n\n## Using the Prompts[\uf0c1](#using-the-prompts \"Permalink to this heading\")\n\nNow, we use the prompts in an index query!\n\nimport openai\nimport os\n\nos.environ\\[\"OPENAI\\_API\\_KEY\"\\] \\= \"sk-...\"\nopenai.api\\_key \\= os.environ\\[\"OPENAI\\_API\\_KEY\"\\]\n\nfrom llama\\_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext\nfrom llama\\_index.llms import OpenAI\n\nservice\\_context \\= ServiceContext.from\\_defaults(\n    llm\\=OpenAI(model\\=\"text-davinci-003\")\n)\n\ndocuments \\= SimpleDirectoryReader(\"../../data/paul\\_graham/\").load\\_data()\n\nindex \\= VectorStoreIndex.from\\_documents(\n    documents, service\\_context\\=service\\_context\n)\n\n### Before Adding Templates[\uf0c1](#before-adding-templates \"Permalink to this heading\")\n\nprint(index.as\\_query\\_engine().query(\"Who is Joe Biden?\"))\n\n Joe Biden is not mentioned in the context information.\n\n### After Adding Templates[\uf0c1](#after-adding-templates \"Permalink to this heading\")\n\nprint(\n    index.as\\_query\\_engine(\n        text\\_qa\\_template\\=text\\_qa\\_template, refine\\_template\\=refine\\_template\n    ).query(\"Who is Joe Biden?\")\n)\n\nJoe Biden is the 46th President of the United States. He was elected in 2020 and is the first Democratic president since Barack Obama. He previously served as Vice President under Obama from 2009 to 2017."
}